<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Mocking virtual functions with gMock" /><meta property="og:locale" content="en_US" /><meta name="description" content="In this mini-series we are going to discover mocking with gMock, the probably most widely used C++ mocking framework. I think that practical discussions should start with theoretical ones. In order to understand something from a practical point of view, we should understand the theoretical background." /><meta property="og:description" content="In this mini-series we are going to discover mocking with gMock, the probably most widely used C++ mocking framework. I think that practical discussions should start with theoretical ones. In order to understand something from a practical point of view, we should understand the theoretical background." /><link rel="canonical" href="https://www.sandordargo.com/blog/2022/03/02/mocking-non-virtual-and-free-functions" /><meta property="og:url" content="https://www.sandordargo.com/blog/2022/03/02/mocking-non-virtual-and-free-functions" /><meta property="og:site_name" content="Sandor Dargo’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-03-02T00:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Mocking virtual functions with gMock" /><meta name="twitter:site" content="@SandorDargo" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-03-02T00:00:00+01:00","datePublished":"2022-03-02T00:00:00+01:00","description":"In this mini-series we are going to discover mocking with gMock, the probably most widely used C++ mocking framework. I think that practical discussions should start with theoretical ones. In order to understand something from a practical point of view, we should understand the theoretical background.","headline":"Mocking virtual functions with gMock","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.sandordargo.com/blog/2022/03/02/mocking-non-virtual-and-free-functions"},"url":"https://www.sandordargo.com/blog/2022/03/02/mocking-non-virtual-and-free-functions"}</script><title>Mocking virtual functions with gMock | Sandor Dargo's Blog</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-89625019-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-89625019-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/SANDOR_DARGO_ROUND.JPG" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Sandor Dargo's Blog</a></div><div class="site-subtitle font-italic">On C++, software development and books</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/books/" class="nav-link"> <i class="fa-fw fas fa-book ml-xl-3 mr-xl-3 unloaded"></i> <span>BOOKS</span> </a><li class="nav-item"> <a href="/speaking/" class="nav-link"> <i class="fa-fw fas fa-microphone ml-xl-3 mr-xl-3 unloaded"></i> <span>SPEAKING</span> </a><li class="nav-item"> <a href="/dailycpp/" class="nav-link"> <i class="fa-fw fas fa-link ml-xl-3 mr-xl-3 unloaded"></i> <span>DAILY C++</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>HI...</span> </a></ul><ul class="w-100"><li class="nav-item"> <a href="https://www.patreon.com/sandordargo" class="nav-link"> <img src="https://c5.patreon.com/external/logo/become_a_patron_button.png"></a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/sandordargo" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/SandorDargo" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['sandor.dargo','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/blog"> Blog </a> </span> <span> <a href="/2022"> 2022 </a> </span> <span> <a href="/03"> 03 </a> </span> <span> <a href="/02"> 02 </a> </span> <span>Mocking virtual functions with gMock</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Mocking virtual functions with gMock</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Sandor Dargo </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Mar 2, 2022, 12:00 AM +0100" prep="on" > Mar 2, 2022 <i class="unloaded">2022-03-02T00:00:00+01:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2558 words">14 min</span></div></div><div class="post-content"><p>In this mini-series we are going to discover mocking with <em>gMock</em>, the probably most widely used C++ mocking framework.</p><p>I think that practical discussions should start with theoretical ones. In order to understand something from a practical point of view, we should understand the theoretical background.</p><p>This is important because we will not simply try to mimic examples, but we will try to do things that make sense even from a birds-eye view.</p><h2 id="what-are-mocks-and-how-do-we-get-them-wrong">What are mocks and how do we get them wrong?</h2><p>It seems evident that we want to speak about mocks when we want to learn about <em>gMock</em>. First, we should understand what mocks are and what are the competing concepts.</p><p><strong>Mocks</strong> are objects that</p><ul><li>are needed in a system under test and<li>that are implementing the same interface as the original objects.</ul><p>Mocks can be used to observe and verify behaviour when we cannot verify something on the class under test and it has side effects; such as invoking methods on our mocks.</p><p>In other words, mocks are objects with pre-defined expectations on what kind of calls they should receive.</p><p>As we are going to see, mocks in <em>gMock</em> do fulfil this idea, but they do more. They also act as <strong>stubs</strong>. Stubs can be configured to respond to calls from the system under tests with the values or exceptions predefined.</p><p>Stubs are come in handy when you have to tests objects depending on external calls (such as calls to networks, databases, etc.). Stubs might not only be able to send these canned answers but they can also have a memory so that they “remember” what they sent. Such stubs might be referenced as spies. You might even define that the first 3 answers should be different from what is coming later.</p><p>We also have to make the distinctions of the <strong>fakes</strong> that have a working but very lightweight implementation. They might return hardcoded data unconditionally; always valid or always invalid data.</p><h2 id="what-is-gmock">What is <em>gMock</em>?</h2><p>Let’s leave behind the theory now and talk about the <em>gMock</em> framework. <em>gMock</em> is one of the most widely used frameworks in C++. <em>gMock</em> comes in handy, when we cannot simply fake all the parameters and calls. It is useful when we need some mocks to be able to write better tests or to be able to write tests at all.</p><p>Though <em>gMock</em> has its own set of assertions, it’s often used only for mocking and for the assertions <em>gTest</em> is used. I even saw <em>gMock</em> being combined with non-Google unit testing frameworks.</p><p><em>gMock</em> promises a declarative, easy to learn and easy to use syntax for defining mocks, though in my experience people don’t necessarily share this opinion.</p><p><em>gMock</em> used to live in his own on Github project, but a couple of years ago it was merged into the <a href="https://github.com/google/googletest/tree/main/googlemock"><em>gTest</em> framework</a>. There were also a couple of syntactical changes in v1.10. Unless I say so, in this series, you can assume that I’m using the syntax of the newer versions.</p><p>As the <a href="https://github.com/google/googletest/blob/main/docs/gmock_for_dummies.md"><em>gMock</em> for dummies</a> mentions, there is a 3-step process to follow when you want to introduce a mock to your tests:</p><ul><li>describe the interface to be mocked<li>create the mocks including all the expectations and behaviours<li>exercise the code that uses the mock objects</ul><p>Let’s go through the three steps. My goal in these articles is not to cover each and every possibility, but to explain the main ones and provide you with the sources to find the details.</p><h2 id="describe-the-interface-to-be-mocked">Describe the interface to be mocked</h2><p>In order to describe an interface, we have to use macros. While in general, it’s good to avoid macros in your code, here you don’t have any others options.</p><p>Taste the expression <em>“mocking an interface”</em>. While in C++ there is no strong equivalent to Java’s <code class="language-plaintext highlighter-rouge">interface</code> keyword and object-type, the closest thing is an abstract class with pure virtual functions.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Car</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="k">virtual</span> <span class="o">~</span><span class="n">Car</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">startEngine</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">virtual</span> <span class="kt">int</span> <span class="n">getTrunkSize</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">addFuel</span><span class="p">(</span><span class="kt">double</span> <span class="n">quantity</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>
</pre></table></code></div></div><p>The second closest thing is a class with some virtual functions in it:</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">GPS</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="k">virtual</span> <span class="o">~</span><span class="n">GPS</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">addDestination</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">destination</span><span class="p">)</span> <span class="p">{}</span>
  <span class="k">virtual</span> <span class="n">Route</span> <span class="nf">getProposedRoute</span><span class="p">(</span><span class="kt">int</span> <span class="n">routeType</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">};</span>
</pre></table></code></div></div><p>I wrote mocking an interface on purpose. It’s much easier to mock a virtual function than a non-virtual one. (<em>In this article I define interfaces using run-time polymorphism.</em>)</p><p>Let’s start first with the <em>virtual</em>s.</p><h2 id="mock-a-virtual-function">Mock a <em>virtual</em> function</h2><p>Mocking a <em>virtual</em> function is easy in most cases, but there are a couple of things to pay attention to.</p><p>Let’s start with mocking all the functions of the previously introduced <code class="language-plaintext highlighter-rouge">Car</code> class.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">MockCar</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Car</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="n">MOCK_METHOD</span><span class="p">(</span><span class="kt">void</span><span class="p">,</span> <span class="n">startEngine</span><span class="p">,</span> <span class="p">(),</span> <span class="p">(</span><span class="k">override</span><span class="p">));</span>
  <span class="n">MOCK_METHOD</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="n">getTrunkSize</span><span class="p">,</span> <span class="p">(),</span> <span class="p">(</span><span class="k">const</span><span class="p">,</span> <span class="k">override</span><span class="p">));</span>
  <span class="n">MOCK_METHOD</span><span class="p">(</span><span class="kt">void</span><span class="p">,</span> <span class="n">addFuel</span><span class="p">,</span> <span class="p">(</span><span class="kt">double</span> <span class="n">quantity</span><span class="p">),</span> <span class="p">(</span><span class="k">override</span><span class="p">));</span>
<span class="p">};</span>
</pre></table></code></div></div><p>Let’s break this down.</p><p>First, we create a class that inherits from the class we want to mock and prepend its name with <code class="language-plaintext highlighter-rouge">Mock</code> (the naming is just a convention).</p><p>Then in the public section, we start mocking the methods whose behaviour we want to change or monitor.</p><p>In earlier versions of <em>gMock</em>, there were a set of macros where the macro name included the number of function parameters and also the constness of the function, but since version 1.10.0, we can simply use the macro <code class="language-plaintext highlighter-rouge">MOCK_METHOD</code>.</p><p>Let’s take the first example:</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">MOCK_METHOD</span><span class="p">(</span><span class="kt">void</span><span class="p">,</span> <span class="n">startEngine</span><span class="p">,</span> <span class="p">(),</span> <span class="p">(</span><span class="k">override</span><span class="p">));</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">MOCK_METHOD</code> takes the following parameters:</p><ul><li>In the first position, we pass in the return type of the function, in this case, <code class="language-plaintext highlighter-rouge">void</code>.<li>The second parameter is the name of the function we want to mock.<li>The third parameter is the list of parameters the function takes. They should be listed surrounded by parentheses, which seems natural. You can basically copy-paste the parameter list from the function signature - just remove the parameter names.<li>The fourth and last parameter is a list (again surrounded by parentheses) of the qualifiers the function has. Ideally, all should be <code class="language-plaintext highlighter-rouge">override</code> as a mock function should mock the base class function. In addition, it takes the cv-qualifiers from the base class. Let’s demonstrate it:</ul><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">MOCK_METHOD</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="n">getTrunkSize</span><span class="p">,</span> <span class="p">(),</span> <span class="p">(</span><span class="k">const</span><span class="p">,</span> <span class="k">override</span><span class="p">));</span>
</pre></table></code></div></div><p>But what does this macro do? Are we good yet?</p><p>No, we are not done yet. We should still provide a behaviour for the mocked methods. It doesn’t matter whether a mocked function is defined in the base class or if it’s abstract, <code class="language-plaintext highlighter-rouge">MOCK_METHOD</code> will provide an empty behaviour. The mocked function will do nothing and if the return type is not <code class="language-plaintext highlighter-rouge">void</code>, it will return the default constructed value.</p><p>If the return type has no default constructor and you don’t provide a default action, <em>gMock</em> is going to throw an exception in the test body:</p><blockquote><p><em>The mock function has no default action set, and its return type has no default value set.”</em></p></blockquote><p>But how do we provide the default action?</p><h2 id="stubs-with-gmock">Stubs with <em>gMock</em></h2><p>As we discussed earlier, with <em>gMock</em>, we can create objects that are not only mocks, but stubs as well. And in fact, the way it’s designed, stubs come first; a mocked function doesn’t have a default behaviour, that’s something we have to provide.</p><h3 id="describe-but-dont-assert">Describe, but don’t assert</h3><p>We can use the <code class="language-plaintext highlighter-rouge">ON_CALL</code> macro to provide behaviour.</p><p>For the <code class="language-plaintext highlighter-rouge">ON_CALL</code> macro, we have to pass in at the first place an instance on which the behaviour has to be defined and at the second place, we have to pass in the function name and all the expected parameters.</p><p>But how do we pass in the parameter list? We don’t pass the types, but the exact values!</p><p>Let’s take <code class="language-plaintext highlighter-rouge">ON_CALL(c, addFuel(5.0))</code> as an example. This means that <code class="language-plaintext highlighter-rouge">addFuel</code> must be called with the value of <code class="language-plaintext highlighter-rouge">5.0</code> (implicit conversions are accepted), otherwise, the expectation will not be met.</p><p>If you don’t know with what value <code class="language-plaintext highlighter-rouge">addFuel</code> should be called or if you don’t care, you can use matchers!</p><p>Wildcards are often used, such as <code class="language-plaintext highlighter-rouge">_</code>: <code class="language-plaintext highlighter-rouge">ON_CALL(c, addFuel(::testing::_))</code>, but we can also express some more precise comparisons such as requiring that a parameter should be greater than a given value: <code class="language-plaintext highlighter-rouge">ON_CALL(c, addFuel(::testing::Gt(5)))</code>.</p><p>You can find more information on these pre-defined matchers <a href="https://github.com/google/googletest/blob/master/docs/reference/matchers.md#wildcard">here</a>.</p><p>After we set which function we provide with a behaviour, we have to set that action. We can do it with <code class="language-plaintext highlighter-rouge">WillByDefault()</code>.</p><p><code class="language-plaintext highlighter-rouge">WillByDefault()</code> can take many different parameters depending on what you want to achieve:</p><ul><li>To return a value, you can use <code class="language-plaintext highlighter-rouge">::testing::Return(value)</code>, e.g. <code class="language-plaintext highlighter-rouge">ON_CALL(c, getTrunkSize()).WillByDefault(::testing::Return(420))</code><li>To return a reference, you can use <code class="language-plaintext highlighter-rouge">::testing::ReturnRef(variable)</code><li><code class="language-plaintext highlighter-rouge">Return</code> sets the value to be returned when you create the action, if you want to set the value when the action is executed, you can use <code class="language-plaintext highlighter-rouge">::testing::ReturnPointee(&amp;vairable)</code>.</ul><p>With <code class="language-plaintext highlighter-rouge">ON_CALL</code>, you have no other options to set the default behaviour than <code class="language-plaintext highlighter-rouge">WillByDefault()</code>. At the same time, you can use it after specifying different input parameters. This is completely valid:</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">ON_CALL</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">)).</span><span class="n">WillByDefault</span><span class="p">(</span><span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">Return</span><span class="p">(</span><span class="mi">42</span><span class="p">))</span>
<span class="n">ON_CALL</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">)).</span><span class="n">WillByDefault</span><span class="p">(</span><span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">Return</span><span class="p">(</span><span class="mi">66</span><span class="p">))</span>
</pre></table></code></div></div><h3 id="describe-and-assert">Describe and assert</h3><p><code class="language-plaintext highlighter-rouge">ON_CALL</code> only describes what a method should do when it’s called, but it doesn’t make sure that it gets called. If we need more than that, if need to assert that a method gets called, maybe even with a given set of parameters, we need to use another macro, <code class="language-plaintext highlighter-rouge">EXPECT_CALL</code>.</p><p>Just like <code class="language-plaintext highlighter-rouge">ON_CALL</code>, an <code class="language-plaintext highlighter-rouge">EXPECT_CALL</code> expression can grow long, but I think in most cases it remains simple. Let’s start with what it takes as parameters.</p><p><code class="language-plaintext highlighter-rouge">EXPECT_CALL(c, getTrunkSize())</code> takes first the mocked object that it should watch and as a second one the method name, including its parameter list.</p><p>The parameters are passed the same way for <code class="language-plaintext highlighter-rouge">EXPECT_CALL</code> and <code class="language-plaintext highlighter-rouge">ON_CALL</code>.</p><p><code class="language-plaintext highlighter-rouge">EXPECT_CALL(c, addFuel(5.0))</code> means that <code class="language-plaintext highlighter-rouge">addFuel</code> must be called with the value of <code class="language-plaintext highlighter-rouge">5.0</code> (implicit conversions are still accepted), otherwise, the expectation will not be met.</p><p>Matchers can be used to widen the range of accepted values.</p><p>Wildcards are often used, such as <code class="language-plaintext highlighter-rouge">_</code>: <code class="language-plaintext highlighter-rouge">EXPECT_CALL(c, addFuel(::testing::_))</code>, but we can also express some more precise comparisons such as requiring that a parameter should be greater than a given value: <code class="language-plaintext highlighter-rouge">EXPECT_CALL(c, addFuel(::testing::Gt(5)))</code>.</p><p>You can find more information on these pre-defined matchers <a href="https://github.com/google/googletest/blob/master/docs/reference/matchers.md#wildcard">here</a>.</p><p>But this is only the first part of the <code class="language-plaintext highlighter-rouge">EXPECT_CALL</code> macro. You can chain it with different optional clauses.</p><p>The first is often referred to as cardinality and it’s expressed with <code class="language-plaintext highlighter-rouge">Times(n)</code>. <code class="language-plaintext highlighter-rouge">n</code> can be an exact number and in that case, if the given function is called more or fewer times - with the expected parameters - the test will fail.</p><p>We can also be less precise and write something like <code class="language-plaintext highlighter-rouge">AtLeast(n)</code> or <code class="language-plaintext highlighter-rouge">AtMost(n)</code>, or even <code class="language-plaintext highlighter-rouge">Between(n, m)</code>. You can find all the <a href="https://github.com/google/googletest/blob/master/docs/reference/mocking.md#times-expect_calltimes">options for cardinality here</a>.</p><p><code class="language-plaintext highlighter-rouge">EXPECT_CALL(c, addFuel(5.0)).Times(::testing::Between(1, 3));</code> would express that on instance <code class="language-plaintext highlighter-rouge">c</code>, <code class="language-plaintext highlighter-rouge">addFuel</code> with the parameter <code class="language-plaintext highlighter-rouge">5.0</code> should be called once, twice or even three times, but no more or fewer times.</p><p>As mentioned earlier, with mocks we can both observe how an object is used, but we can also define what it should do when it’s called. We can define actions and we can do right after we set the cardinalities.</p><p>We have two options to define actions, we can use either <code class="language-plaintext highlighter-rouge">WillOnce</code> or <code class="language-plaintext highlighter-rouge">WillRepeatedly</code>. It’s worth noting they can be also chained, <code class="language-plaintext highlighter-rouge">WillOnce</code> can be followed either by another <code class="language-plaintext highlighter-rouge">WillOnce</code> or <code class="language-plaintext highlighter-rouge">WillRepeatedly</code>.</p><p>These actions are self-evident, <code class="language-plaintext highlighter-rouge">WillOnce</code> will define the action to be taken for one call and <code class="language-plaintext highlighter-rouge">WillRepeatedly</code> for all the coming calls. What to pass them as a parameter?</p><ul><li>To return a value, you can use <code class="language-plaintext highlighter-rouge">::testing::Return(value)</code>, e.g. <code class="language-plaintext highlighter-rouge">EXPECT_CALL(c, getTrunkSize()).WillRepeatedly(::testing::Return(420))</code><li>To return a reference, you can use <code class="language-plaintext highlighter-rouge">::testing::ReturnRef(variable)</code><li><code class="language-plaintext highlighter-rouge">Return</code> sets the value to be returned when you create the action, if you want to set the value when the action is executed, you can use <code class="language-plaintext highlighter-rouge">::testing::ReturnPointee(&amp;vairable)</code>.</ul><p>You saw in the previous example that I omitted to set the cardinalities - setting how many times we expect the function to be called. Setting the cardinalities is not mandatory and they can be deduced:</p><ul><li>With no action set, it’s inferred as <code class="language-plaintext highlighter-rouge">Times(1)</code><li>If only <code class="language-plaintext highlighter-rouge">WillOnce</code> is used, it will be <code class="language-plaintext highlighter-rouge">Times(n)</code> where <code class="language-plaintext highlighter-rouge">n</code> is the number of times <code class="language-plaintext highlighter-rouge">WillOnce</code> is used<li>If both actions are used, it will be <code class="language-plaintext highlighter-rouge">Times(AtLeast(n))</code> where <code class="language-plaintext highlighter-rouge">n</code> is the number of times <code class="language-plaintext highlighter-rouge">WillOnce</code> is used.</ul><h2 id="differences-between-on_call-and-expect_call">Differences between ON_CALL and EXPECT_CALL</h2><p>As mentioned, the biggest difference between <code class="language-plaintext highlighter-rouge">ON_CALL</code> and <code class="language-plaintext highlighter-rouge">EXPECT_CALL</code> is that <code class="language-plaintext highlighter-rouge">ON_CALL</code> doesn’t set any expectations.</p><p>It might sound counter-intuitive, but because of the above difference, you should use <code class="language-plaintext highlighter-rouge">ON_CALL</code> by default.</p><p>With <code class="language-plaintext highlighter-rouge">EXPECT_CALL</code> you might overspecify your tests and they become too brittle. You might couple the tests too closely to the implementation. Think about <a href="https://blog.cleancoder.com/uncle-bob/2017/10/03/TestContravariance.html">the problem of test contra-variance explained by Uncle Bob</a>.</p><p>Use <code class="language-plaintext highlighter-rouge">EXPECT_CALL</code> only when the main purpose of a test is to make sure that something gets called, and even then you should think twice whether you want it to be tested at all.</p><h2 id="what-if-you-dont-want-to-provide-a-default-behaviour">What if you don’t want to provide a default behaviour?</h2><p>In the previous sections, we saw what happens when we have a mocked interface and we provide the mocked behaviour with either <code class="language-plaintext highlighter-rouge">EXPECT_CALL</code> or with <code class="language-plaintext highlighter-rouge">ON_CALL</code>. But what happens if we forget or we don’t want to provide an overridden behaviour? You might think it’s not realistic, but if you mock lots of functions of an API - it should probably be a red flag, by the way - it might happen that you don’t want to provide a mocked behaviour every time for every function.</p><p>Even if you fail to provide a mocked behaviour, it will be automatically provided under certain conditions:</p><ul><li>if the return type is <code class="language-plaintext highlighter-rouge">void</code>, the default action is a no-op. In other words, the mocked behaviour is to do nothing, instead of executing the original behaviour.<li>if the return type is not <code class="language-plaintext highlighter-rouge">void</code>, a default constructed value will be returned, given that the return type can be default constructed.</ul><p>If the return type is not <em>default constructible</em>, you’ll get a runtime exception:</p><blockquote><p><em>unknown file: Failure</em> <em>C++ exception with description “Uninteresting mock function call - returning default value.</em> <em>Function call: getTrunkSize()</em> <em>The mock function has no default action set, and its return type has no default value set.”</em></p></blockquote><p>If you don’t get the runtime exception and the default action is used, you’ll get a runtime warning from the <em>gMock</em> framework:</p><blockquote><p><em>Uninteresting mock function call - returning default value.</em></p></blockquote><p>It’s quite straightforward, it doesn’t require much explanation.</p><p>But how to get rid of it?</p><p>You have a couple of options:</p><ul><li>You stop mocking this method.<li>You do provide a mocked behaviour.<li>Instead of simply creating an instance of your <code class="language-plaintext highlighter-rouge">MockedClass</code>, use <code class="language-plaintext highlighter-rouge">::testing::NiceMock&lt;MockedClass&gt;</code> in order to silence such warnings. More about this next time.</ul><p>But can we fall back to the original implementation?</p><p>Of course, we can do whatever we want! For this, we need a lambda:</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">ON_CALL</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">startEngine</span><span class="p">()).</span><span class="n">WillByDefault</span><span class="p">([</span><span class="o">&amp;</span><span class="n">c</span><span class="p">](){</span><span class="k">return</span> <span class="n">c</span><span class="p">.</span><span class="n">Car</span><span class="o">::</span><span class="n">startEngine</span><span class="p">();});</span>
</pre></table></code></div></div><p>As you can see, the lambda simply forwards the call to the underlying base class.</p><h2 id="conclusion">Conclusion</h2><p>Today we started to discover one of the most popular mocking frameworks for C++, <em>gMock</em>. In this first episode, we saw how to mock <em>virtual</em> functions, how to provide simplified behaviour for them, and how to make assertions on how many times and with what inputs a mocked function is called.</p><p>Next time we’ll see how to mock non-virtual members and free functions. Stay tuned.</p><h2 id="connect-deeper">Connect deeper</h2><p>If you liked this article, please</p><ul><li>hit on the like button,<li><a href="http://eepurl.com/gvcv1j">subscribe to my newsletter</a><li>and let’s connect on <a href="https://twitter.com/SandorDargo">Twitter</a>!</ul><a href="https://www.patreon.com/sandordargo" style="float: left; padding-left: 0;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://c5.patreon.com/external/logo/become_a_patron_button.png" style="float: left; padding-left: 0;"></a></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/dev/'>dev</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cpp/" class="post-tag no-text-decoration" >cpp</a> <a href="/tags/virtual/" class="post-tag no-text-decoration" >virtual</a> <a href="/tags/mocking/" class="post-tag no-text-decoration" >mocking</a> <a href="/tags/gmock/" class="post-tag no-text-decoration" >gmock</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><a href="https://www.patreon.com/sandordargo" style="float: left; padding-left: 0;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://c5.patreon.com/external/logo/become_a_patron_button.png" style="float: left; padding-left: 0;"></a><div class="share-wrapper"> <a href="https://www.patreon.com/sandordargo" style="float: left; padding-left: 0;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://c5.patreon.com/external/logo/become_a_patron_button.png" style="float: left; padding-left: 0;"></a> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Mocking virtual functions with gMock - Sandor Dargo's Blog&url=https://www.sandordargo.com/blog/2022/03/02/mocking-non-virtual-and-free-functions" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Mocking virtual functions with gMock - Sandor Dargo's Blog&u=https://www.sandordargo.com/blog/2022/03/02/mocking-non-virtual-and-free-functions" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Mocking virtual functions with gMock - Sandor Dargo's Blog&url=https://www.sandordargo.com/blog/2022/03/02/mocking-non-virtual-and-free-functions" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://news.ycombinator.com/submitlink?t=Mocking virtual functions with gMock - Sandor Dargo's Blog&u=https://www.sandordargo.com/blog/2022/03/02/mocking-non-virtual-and-free-functions" data-toggle="tooltip" data-placement="top" title="HackerNews" target="_blank" rel="noopener" aria-label="HackerNews"> <i class="fa-fw fab fa-hacker-news"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/blog/2026/01/21/clocks-part-8-cpp20-timezones">Time in C++: C++20 Brought Us Time Zones</a><li><a href="/blog/2019/04/10/lesson-of-a-booking-dont-trust-the-system">Lesson of a booking: Don't trust the system!</a><li><a href="/blog/2020/07/22/always-catch-exceptions-by-reference">Why should we always catch exceptions by reference?</a><li><a href="/blog/2020/11/28/emergent-design">Emergent Design: The Evolutionary Nature of Professional Software Development by Scott Bain</a><li><a href="/blog/2021/10/06/airy-code-reviews">Bring some fresh AIR and write effective code review comments</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cpp/">cpp</a> <a class="post-tag" href="/tags/books/">books</a> <a class="post-tag" href="/tags/watercooler/">watercooler</a> <a class="post-tag" href="/tags/career/">career</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/cpp23/">cpp23</a> <a class="post-tag" href="/tags/stl/">stl</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/self-improvement/">self-improvement</a> <a class="post-tag" href="/tags/management/">management</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/blog/2022/03/09/mocking-non-virtual-and-free-functions"><div class="card-body"> <span class="timeago small" > Mar 9, 2022 <i class="unloaded">2022-03-09T00:00:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Mocking non-virtual and free functions with gMock</h3><div class="text-muted small"><p> Last time we started to discover gMock and we went into details regarding how we can mock virtual functions. We saw how to indicate that a function is to be mocked, how to provide a canned behaviou...</p></div></div></a></div><div class="card"> <a href="/blog/2018/07/05/cpp-override"><div class="card-body"> <span class="timeago small" > Jul 5, 2018 <i class="unloaded">2018-07-05T00:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Why to use the override specifier in C++ 11?</h3><div class="text-muted small"><p> The override specifier was introduced to the language with C++11 and it is one of the easiest tool to significantly improve the maintainability of our codebases. override tells both the reader an...</p></div></div></a></div><div class="card"> <a href="/blog/2021/11/24/production-issues-part-i-undefined-behaviour"><div class="card-body"> <span class="timeago small" > Nov 24, 2021 <i class="unloaded">2021-11-24T00:00:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>I broke production 3 times in 3 weeks - Part I</h3><div class="text-muted small"><p> Are you a careful coder who barely introduces errors? How do you feel when still manage to bring production down? You might feel horrible, but I think you should take it as an opportunity. You can...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/blog/2022/02/23/stl-alogorithms-tutorial-part-31-wrap-up" class="btn btn-outline-primary" prompt="Older"><p>The big STL Algorithms tutorial: wrapping up</p></a> <a href="/blog/2022/03/05/secondhand-time-by-svetlana-alexievich" class="btn btn-outline-primary" prompt="Newer"><p>Secondhand Time: The Last of the Soviets by Svetlana Alexievich</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//sandordargo-github-io.disqus.com/embed.js', disqusConfig: function() { this.page.title = 'Mocking virtual functions with gMock'; this.page.url = 'https://www.sandordargo.com/blog/2022/03/02/mocking-non-virtual-and-free-functions'; this.page.identifier = '/blog/2022/03/02/mocking-non-virtual-and-free-functions'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><div id="amzn-assoc-ad-be5a767b-3346-40aa-bc00-2eff0ce33d2b"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=be5a767b-3346-40aa-bc00-2eff0ce33d2b"></script> <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script> <script type="text/javascript" src="//downloads.mailchimp.com/js/signup-forms/popup/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script><script type="text/javascript">require(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us16.list-manage.com","uuid":"b073dbd5c29322302f59a8cd8","lid":"d26240427e"}) })</script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2026 <a href="https://twitter.com/SandorDargo">Sandor Dargo</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/cpp/">cpp</a> <a class="post-tag" href="/tags/books/">books</a> <a class="post-tag" href="/tags/watercooler/">watercooler</a> <a class="post-tag" href="/tags/career/">career</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/cpp23/">cpp23</a> <a class="post-tag" href="/tags/stl/">stl</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/self-improvement/">self improvement</a> <a class="post-tag" href="/tags/management/">management</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://www.sandordargo.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
