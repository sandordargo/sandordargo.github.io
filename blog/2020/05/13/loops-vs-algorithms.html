<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Loops are bad, algorithms are good! Aren’t they?" /><meta property="og:locale" content="en_US" /><meta name="description" content="This is a statement frequently repeated by people who either just more familiar with the &lt;algorithms&gt; header in C++ and/or are advocates of functional programming in C++. And of course, let’s not forget about the people who just repeat what others say without understanding the reasons behind." /><meta property="og:description" content="This is a statement frequently repeated by people who either just more familiar with the &lt;algorithms&gt; header in C++ and/or are advocates of functional programming in C++. And of course, let’s not forget about the people who just repeat what others say without understanding the reasons behind." /><link rel="canonical" href="https://www.sandordargo.com/blog/2020/05/13/loops-vs-algorithms" /><meta property="og:url" content="https://www.sandordargo.com/blog/2020/05/13/loops-vs-algorithms" /><meta property="og:site_name" content="Sandor Dargo’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-05-13T00:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Loops are bad, algorithms are good! Aren’t they?" /><meta name="twitter:site" content="@SandorDargo" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-01-30T22:32:25+01:00","datePublished":"2020-05-13T00:00:00+02:00","description":"This is a statement frequently repeated by people who either just more familiar with the &lt;algorithms&gt; header in C++ and/or are advocates of functional programming in C++. And of course, let’s not forget about the people who just repeat what others say without understanding the reasons behind.","headline":"Loops are bad, algorithms are good! Aren’t they?","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.sandordargo.com/blog/2020/05/13/loops-vs-algorithms"},"url":"https://www.sandordargo.com/blog/2020/05/13/loops-vs-algorithms"}</script><title>Loops are bad, algorithms are good! Aren't they? | Sandor Dargo's Blog</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-89625019-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-89625019-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/SANDOR_DARGO_ROUND.JPG" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Sandor Dargo's Blog</a></div><div class="site-subtitle font-italic">On C++, software development and books</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/books/" class="nav-link"> <i class="fa-fw fas fa-book ml-xl-3 mr-xl-3 unloaded"></i> <span>BOOKS</span> </a><li class="nav-item"> <a href="/speaking/" class="nav-link"> <i class="fa-fw fas fa-microphone ml-xl-3 mr-xl-3 unloaded"></i> <span>SPEAKING</span> </a><li class="nav-item"> <a href="/dailycpp/" class="nav-link"> <i class="fa-fw fas fa-link ml-xl-3 mr-xl-3 unloaded"></i> <span>DAILY C++</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>HI...</span> </a></ul><ul class="w-100"><li class="nav-item"> <a href="https://www.patreon.com/sandordargo" class="nav-link"> <img src="https://c5.patreon.com/external/logo/become_a_patron_button.png"></a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/sandordargo" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/SandorDargo" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['sandor.dargo','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/blog"> Blog </a> </span> <span> <a href="/2020"> 2020 </a> </span> <span> <a href="/05"> 05 </a> </span> <span> <a href="/13"> 13 </a> </span> <span>Loops are bad, algorithms are good! Aren't they?</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Loops are bad, algorithms are good! Aren't they?</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Sandor Dargo </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, May 13, 2020, 12:00 AM +0200" prep="on" > May 13, 2020 <i class="unloaded">2020-05-13T00:00:00+02:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Jan 30, 2022, 10:32 PM +0100" prefix="Updated " > Jan 30, 2022 <i class="unloaded">2022-01-30T22:32:25+01:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1450 words">8 min</span></div></div><div class="post-content"><p>This is a statement frequently repeated by people who either just more familiar with the <code class="language-plaintext highlighter-rouge">&lt;algorithms&gt;</code> header in C++ and/or are advocates of functional programming in C++. And of course, let’s not forget about the people who just repeat what others say without understanding the reasons behind.</p><p>We shouldn’t act like people who are just part of a herd. Even if a message is valid, we shouldn’t just broadcast it because someone knowledgeable said so. We should understand why they are right.</p><p>Today, let’s discuss the reasons usually mentioned to prove why the good old loops are considered worse than using predefined structures of the standard library.</p><ol><li>If you have to write something a thousand times, there is a fair chance that you’ll make some mistakes once in a while. On the other hand, if you use functions that were written before and used a million times, you won’t face any bugs.<li>Algorithms have a better performance<li>Algorithms are more expressive</ol><p>Are these points valid?</p><h2 id="loops-are-error-prone">Loops are error-prone</h2><p>Few are humble enough to admit this. “I’m not a moron, I can write a simple for loop that will break whenever an element is found.”</p><p>Until you can’t.</p><p>This is mostly not about your experience. It’s about being human. If you do, you err. No matter what. You can put in place procedures that will limit the quantity and the scope of your mistakes, like having code reviews and unit tests, but you cannot eradicate the possibility of <a href="http://sandordargo.com/blog/2020/02/26/what-to-do-when-screwed-up">screwing it up</a>.</p><p>Interestingly, these objections usually come from people who also complain that coding dojo exercises are too easy for them. People who claim cannot learn from <a href="http://sandordargo.com/blog/2018/08/08/gilded-rose-revisited">refactoring the gilded rose</a>.</p><p>Using a predefined structure, an algorithm is a lot about being humble and accept the wisdom of thousands if not millions.</p><h2 id="algorithms-have-a-better-performance">Algorithms have a better performance</h2><p>This is only partially true. If we speak about C++, functions in the <code class="language-plaintext highlighter-rouge">&lt;algorithms&gt;</code> header are not optimized for corner cases. They are optimized for a certain portability between different systems and container types. You can use them on any STL container without knowing their exact type. As such, we cannot assume that they can take advantage of the characteristics of the underlying datasets. Especially that they don’t operate directly on the containers, but through the iterators that give access to data behind. I say that we cannot assume, because in fact, very few people understand what is going on under the hoods of the compiler and you might find or write an implementation of the standard library that is much bigger than the usual ones, but optimized for each container type.</p><p>At the same time, chances are good that your for loops are not optimized either. And it’s alright. Of course, as you write your loops, you are in control. You can optimize them, you can get the last cycles out of them. You cannot do the same with the already written functions of a library, even if it’s the standard library.</p><p>But honestly, most probably you don’t need those last drops of performance. If you do, you are in a small minority and probably the standard implementation of the STL is not for you. But there are others, like the <a href="https://github.com/electronicarts/EASTL">Eastl</a> focusing on performance. In nominal cases, algorithms will provide better performance. In addition, since C++17 you can set <a href="https://en.cppreference.com/w/cpp/algorithm/execution_policy_tag_t">execution policies</a> for the algorithms of the standard library.</p><p>In short, just by passing an optional parameter to an algorithm, you can parallelize the execution of it.</p><p>It’s that simple:</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">};</span>
<span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">par_unseq</span><span class="p">,</span> <span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
</pre></table></code></div></div><p>If you have access to the necessary hardware and compiler supporting parallel execution, try this new feature to have a better visibility on the possible performance gain!</p><h2 id="algorightms-are-more-expressive-than-loops">Algorightms are more expressive than loops</h2><p>I truly believe so.</p><p>You can use algorithms in a more expressive way than <code class="language-plaintext highlighter-rouge">for</code> or <code class="language-plaintext highlighter-rouge">while</code> loops.</p><p>But it doesn’t come automatically, there is no automation for this. You need some practice to find the good one.</p><p>Let’s take an example.</p><p>In python, it’s very easy to check if an element is in a list.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">isIncluded</span> <span class="o">=</span> <span class="n">searchedOne</span> <span class="ow">in</span> <span class="n">collection</span>
</pre></table></code></div></div><p>How would you do this in C++?</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kt">bool</span> <span class="n">isIncluded</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="n">item</span> <span class="o">:</span> <span class="n">collection</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">searchedOne</span> <span class="o">==</span> <span class="n">item</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">isIncluded</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>And this is not the worst possible form as I already took advantage of the range based for loop.</p><p>While it’s a bit verbose, it is also easy to understand. We loop through a collection and as soon as we found the element we were looking for, we break out of the loop. As I wrote, it’s a bit lengthy, but otherwise, it’s OK.</p><p>Let’s see what happens, if use <code class="language-plaintext highlighter-rouge">std::find</code> instead.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">auto</span> <span class="n">foundPosition</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">find</span><span class="p">(</span><span class="n">collection</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">collection</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">searchedOne</span><span class="p">);</span>
<span class="kt">bool</span> <span class="n">isIncluded</span> <span class="o">=</span> <span class="p">(</span><span class="n">foundPosition</span> <span class="o">!=</span> <span class="n">collection</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
</pre></table></code></div></div><p>The first thing we can observe is that it’s terse, only two lines compared to the 7 we had earlier. And in fact, we could make all this a one-liner.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">auto</span> <span class="n">isIncluded</span> <span class="o">=</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">find</span><span class="p">(</span><span class="n">collection</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">collection</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">searchedOne</span><span class="p">)</span> <span class="o">!=</span> <span class="n">collection</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
</pre></table></code></div></div><p>But this is just to show it’s possible, not to say it’s more readable than the 2 line version. Actually I think that the line version is optimal here.</p><p>On the first line, we search for the position of an element. If it’s not part of the container, it’ll point behind the last element, so at <code class="language-plaintext highlighter-rouge">std::vector&lt;&gt;::end()</code> meaning that it’s not part of the collection.</p><p>In the second line, we just make the comparison between the result of find and <code class="language-plaintext highlighter-rouge">end</code> to see if we found what we’ve been looking for.</p><p>Recently in a code review, in the unit tests, I ran into a similar <code class="language-plaintext highlighter-rouge">for</code> loop. Similar, yet a bit different.</p><p>The difference was that it also contained a condition. Here is the original for loop:</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">key</span> <span class="o">:</span> <span class="n">keys</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">aValue</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">not</span> <span class="n">iCache</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">aValue</span><span class="p">)</span> <span class="o">||</span> <span class="n">expectedValue</span> <span class="o">!=</span> <span class="n">aValue</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
</pre></table></code></div></div><p>Without too much thinking, I just asked if we could use an algorithm, like <code class="language-plaintext highlighter-rouge">std::find_if</code>. The discussion went on and we came up with this code.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">auto</span> <span class="n">found</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">find_if</span><span class="p">(</span><span class="n">keys</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">keys</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span>
    <span class="p">[</span><span class="o">&amp;</span><span class="n">expectedValue</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">iCache</span><span class="p">](</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">aValue</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">not</span> <span class="n">iCache</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">aValue</span><span class="p">)</span> <span class="o">||</span> <span class="n">expectedValue</span> <span class="o">!=</span> <span class="n">aValue</span><span class="p">;</span>
<span class="p">});</span>
<span class="k">return</span> <span class="n">found</span> <span class="o">==</span> <span class="n">keys</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
</pre></table></code></div></div><p>It’s not really shorter than the original code, probably it’s even longer a bit. And while the variable name <code class="language-plaintext highlighter-rouge">found</code> is clear enough and the meaning of <code class="language-plaintext highlighter-rouge">std::find_if</code> is also straightforward, there is something that is difficult to understand. Maybe it’s not doing the same thing as the original code. The lambda is our scapegoat. It’s a bit complex. How could we do it better?</p><p>We could save and name the lambda, but first, let’s just try to write down in plain English what do we want. If there is any key that we cannot find in the cache and whose value doesn’t meet our expectations, we should return <code class="language-plaintext highlighter-rouge">false</code>, otherwise, we are fine.</p><p>In other words, in order to return <code class="language-plaintext highlighter-rouge">true</code>, there should be no element that doesn’t match our expectations.</p><p>There should be no mismatch.</p><p>None of the elements should be a mismatch.</p><p>Bingo!</p><p>There is an algorithm exactly for that.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">auto</span> <span class="n">valueMismatch</span> <span class="o">=</span> <span class="p">[</span><span class="o">&amp;</span><span class="n">expectedValue</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">iCache</span><span class="p">](</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">aValue</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">not</span> <span class="n">iCache</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">aValue</span><span class="p">))</span> <span class="o">||</span> <span class="n">expectedValue</span> <span class="o">!=</span> <span class="n">aValue</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">none_of</span><span class="p">(</span><span class="n">keys</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">keys</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">valueMismatch</span><span class="p">);</span>
</pre></table></code></div></div><p>With this version, my colleague was convinced that it’s better to use an algorithm than the original <code class="language-plaintext highlighter-rouge">for</code> loop.</p><p>The bottom line is that there is no magic algorithm to use instead of a for loop. But there something like 105 of them. Johnathan Boccara talked about all of them in about an hour.</p><p>If you know them and keep thinking for a bit, it’s pretty sure that you’ll find once matching your use case and you can make your code more expressive.</p><h2 id="conclusion">Conclusion</h2><p>It’s important to understand why something is better than the other option. It’s not enough just to keep repeating others’ opinions.</p><p>Today we saw, why algorithms are most of the time better than plain old for loops.</p><p>They are less error-prone than loops as they were already written and tested - a lot. Unless you are going for the last drops of performance, algorithms will provide be good enough for you and actually more performant than simple loops.</p><p>But the most important point is that they are more expressive. It’s straightforward to pick the good among many, but with education and practice, you’ll be able to easily find an algorithm that can replace a for loop in most cases.</p><p>Happy coding!</p><a href="https://www.patreon.com/sandordargo" style="float: left; padding-left: 0;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://c5.patreon.com/external/logo/become_a_patron_button.png" style="float: left; padding-left: 0;"></a></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/dev/'>dev</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cpp/" class="post-tag no-text-decoration" >cpp</a> <a href="/tags/stl/" class="post-tag no-text-decoration" >stl</a> <a href="/tags/algorithms/" class="post-tag no-text-decoration" >algorithms</a> <a href="/tags/bestpractices/" class="post-tag no-text-decoration" >bestpractices</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><a href="https://www.patreon.com/sandordargo" style="float: left; padding-left: 0;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://c5.patreon.com/external/logo/become_a_patron_button.png" style="float: left; padding-left: 0;"></a><div class="share-wrapper"> <a href="https://www.patreon.com/sandordargo" style="float: left; padding-left: 0;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://c5.patreon.com/external/logo/become_a_patron_button.png" style="float: left; padding-left: 0;"></a> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Loops are bad, algorithms are good! Aren't they? - Sandor Dargo's Blog&url=https://www.sandordargo.com/blog/2020/05/13/loops-vs-algorithms" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Loops are bad, algorithms are good! Aren't they? - Sandor Dargo's Blog&u=https://www.sandordargo.com/blog/2020/05/13/loops-vs-algorithms" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Loops are bad, algorithms are good! Aren't they? - Sandor Dargo's Blog&url=https://www.sandordargo.com/blog/2020/05/13/loops-vs-algorithms" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://news.ycombinator.com/submitlink?t=Loops are bad, algorithms are good! Aren't they? - Sandor Dargo's Blog&u=https://www.sandordargo.com/blog/2020/05/13/loops-vs-algorithms" data-toggle="tooltip" data-placement="top" title="HackerNews" target="_blank" rel="noopener" aria-label="HackerNews"> <i class="fa-fw fab fa-hacker-news"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/blog/2025/10/22/trip-report-budapest-cpp">Trip report: Budapest C++ - Breaking & Building C++</a><li><a href="/blog/2025/10/01/cpp26-optional-of-reference">C++26: std::optional&lt;T&amp;&gt;</a><li><a href="/blog/2025/09/24/trip-report-cppcon-2025">Trip report: CppCon 2025</a><li><a href="/blog/2025/07/23/format-your-own-type-part-1">Format your own type (Part 1)</a><li><a href="/blog/2025/07/02/cpponsea-trip-report">Trip report: C++ On Sea 2025</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cpp/">cpp</a> <a class="post-tag" href="/tags/books/">books</a> <a class="post-tag" href="/tags/watercooler/">watercooler</a> <a class="post-tag" href="/tags/career/">career</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/cpp23/">cpp23</a> <a class="post-tag" href="/tags/stl/">stl</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/self-improvement/">self-improvement</a> <a class="post-tag" href="/tags/management/">management</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/blog/2019/01/30/stl-algos-intro"><div class="card-body"> <span class="timeago small" > Jan 30, 2019 <i class="unloaded">2019-01-30T00:00:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>The big STL Algorithms tutorial: Introduction</h3><div class="text-muted small"><p> I’ve already written quite a few articles about features introduced by C++ 11 and how much it changed how I look at the language. The feature I liked the most is probably the one of lambda expressi...</p></div></div></a></div><div class="card"> <a href="/blog/2019/02/20/stl-algorithm-tutorial-part-1-any-all-none"><div class="card-body"> <span class="timeago small" > Feb 20, 2019 <i class="unloaded">2019-02-20T00:00:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>The big STL Algorithms tutorial: all_of, any_of, none_of</h3><div class="text-muted small"><p> In this first part of the big STL algorithm tutorial, I’ll start with the first chunk of the non-modifying sequence operations. Namely, in this post, you are going to read about all_of, any_of an...</p></div></div></a></div><div class="card"> <a href="/blog/2019/04/03/stl-algorithm-tutorial-part-2-for_each"><div class="card-body"> <span class="timeago small" > Apr 3, 2019 <i class="unloaded">2019-04-03T00:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>The big STL Algorithms tutorial: for_each</h3><div class="text-muted small"><p> In this next part of the big STL algorithm tutorial, I’ll explain only one function. The for_each algorithm. What does it do? for_each takes a range and a function to apply on each element of th...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/blog/2020/05/06/the-power-of-habit" class="btn btn-outline-primary" prompt="Older"><p>The Power of Habit by Charles Duhigg</p></a> <a href="/blog/2020/05/20/think-about-one-with-virtuous-life" class="btn btn-outline-primary" prompt="Newer"><p>Think about one with virtuous life</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//sandordargo-github-io.disqus.com/embed.js', disqusConfig: function() { this.page.title = 'Loops are bad, algorithms are good! Aren't they?'; this.page.url = 'https://www.sandordargo.com/blog/2020/05/13/loops-vs-algorithms'; this.page.identifier = '/blog/2020/05/13/loops-vs-algorithms'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><div id="amzn-assoc-ad-be5a767b-3346-40aa-bc00-2eff0ce33d2b"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=be5a767b-3346-40aa-bc00-2eff0ce33d2b"></script> <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script> <script type="text/javascript" src="//downloads.mailchimp.com/js/signup-forms/popup/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script><script type="text/javascript">require(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us16.list-manage.com","uuid":"b073dbd5c29322302f59a8cd8","lid":"d26240427e"}) })</script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/SandorDargo">Sandor Dargo</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/cpp/">cpp</a> <a class="post-tag" href="/tags/books/">books</a> <a class="post-tag" href="/tags/watercooler/">watercooler</a> <a class="post-tag" href="/tags/career/">career</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/cpp23/">cpp23</a> <a class="post-tag" href="/tags/stl/">stl</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/self-improvement/">self improvement</a> <a class="post-tag" href="/tags/management/">management</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://www.sandordargo.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
