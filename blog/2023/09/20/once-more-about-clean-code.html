<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Once more about clean code" /><meta property="og:locale" content="en_US" /><meta name="description" content="This summer, I gave a talk at C++ On Sea about Why Clean Code is not the norm where at the end, Conor Hoekstra - who you might know from code_report or from other podcasts - asked me a question about what I think about the « “Clean” Code, horrible performance » video. I had not seen it, but I said in the beginning of July that it would be a nice topic for my blog. And here we are in September… :) Yes, it’s been more than two months. To be honest, I started to watch the video right in Folkestone once the conference ended and I stopped it a few minutes later. I didn’t like the style that I considered completely disrespectful or simply smug. Two months later, I decided to watch it. The style of someone shouldn’t prevent me from hearing what that person has to say. I still don’t like the style, which might have had an effect also on how I interpret his message. Still, I think it’s worth watching the video. We waste so much time scrolling social media, watching short videos for instant gratification and reading others’ rants on completely insignificant topics. This video has at least something to say. Even if you disagree with a big part of it. Let me summarize it in a paragraph. Casey Muratori finds “Clean Code” harmful in terms of performance. He attempts to showcase that following “Clean Code” guidelines you throw away decades of hardware improvements and therefore “Clean Code” is one of the reasons behind sluggish code. Muratori seems particularly against OOP and virtual functions. Below, let me share my answer not to Muratori, but to Conor as he asked me what I think about this video and in particular the performance implications of clean code. Why does this video have nothing to do with my talk? What would I have answered to Conor if I had known this video? First of all, I hope I made it clear in the very beginning of my presentation, that it’s about clean code and not about “Clean Code”. I was not talking about the books and work of Bob Martin. Even though I appreciate a lot his vision and I think the Clean Code series heavily influenced how I code and Uncle Bob pushed me in the good direction. Yet, in the talk, I didn’t refer to his “Clean Code” and the guidelines he shared. I referred to clean code as something more vague. I defined clean code as “something that is easy to understand and easy to change.” And with that, let me get back to the video. Muratori is obviously a very smart person who can write performant and correct code. A smart person, yet I think he acts … well, differently … and I think his goal is to make fun of “clean coders” and show them as incompetent programmers. Why do I say so? He said that he wouldn’t use a for loop with iterators because the book didn’t say so. The book used plain old for loops. I had a strong urge at that moment - again - to close the tab. The book is not language-specific and was written a long time ago. Plus it’s not written for morons who cannot make a single decision on their own and decide to go with a range-based for loop. Or was it? If iterators or a range-based loop is what makes a code “cleaner” then that is what you should use, it’s that simple. But I never wanted to get into such trouble and talk about specific rules that might depend on the language or even the standard you use, therefore I went with the above definition of clean code. Is that kind of code less performant than optimal? Yes! It is! And I know about it, probably most programmers do too. At each C++ Conference, usually among the lightning talks, you’ll find one or two which is about optimizing the last cycles out of some well-known and widely used standard functions. They are usually brilliant. And the people who present them on stage know more about the ins and outs of C++ than most of us. But even they wouldn’t use those optimized versions everywhere because those are usually difficult to understand and difficult to maintain. Let’s get back to the video. Is the performance of clean code really decades worse as Muratori claims? I doubt that, but I’m not going into a measurement war. Especially because we define clean code differently. Read C++ Software Design by Klaus Iglberger. Most of the patterns he shares have several versions. The ones using value semantics are usually clean and easy to maintain. In my opinion, even the author of Clean Code would consider them “clean” (I might be wrong), but I think Muratori would not as they are not based on runtime polymorphism. But would the lower performance matter that much? Not always. When isn’t “clean code” a bottleneck for performance? Muratori comes from a world where performance is king. Game development. I think he has to rely more on performant and optimized code than many others. I spent 10 years in the enterprise world, and nowadays I’m working on code behind mobile apps. Performance is not the only thing that matters and it might not even be among the most critical aspects. Let me share two stories with you. Horrible barely used code didn’t matter When I started my development journey in 2013, I was thrown into the deep water quickly. I wrote almost alone a new service for our backends. I wrote some horrible code and I received no meaningful code review on time. Such a badly managed project… Anyway, I shipped the code. It “worked”. The returned results were correct, but there were two issues: a huge memory footprint extremely slow code A talented but at the time not very experienced developer came by and he saw that something that I should have done in probably O(n) time was done in O(n^4). Yes, it was that bad, I was so clueless. I might have been new to development, but I was not completely without common sense. (Despite my horrible algorithm!) I was convinced that that little piece of code could not be responsible for the overall slowness of the service. I didn’t know how to measure performance correctly, but I had time, I had a spreadsheet and I had logs with timestamps. The service spent a fraction of the time in those two horrible functions. They were not responsible for our problems. I’m not saying that they should not have been corrected. They shouldn’t have been merged in the first place! What I’m saying is that they didn’t matter for the performance of the system overall. It turned out that the 3rd party library was performing initialization and cleanup at every invocation of the service instead of the startup/destruction of the backend itself. Once that was fixed, our performance and memory footprint issues were gone. The key to 10x traffic was not through removing virtual calls A few years ago I was working on a service which faced a 10x traffic growth in a few months. The service was already quite old, but we secured a contract with one of the biggest players in online travel. We shared our prediction with our business unit about how big of a growth our service could support, and we were right. Sadly, project managers didn’t really care until the service actually crashed. The way out of the situation was not through optimizing our code in terms of performance or through removing class hierarchies to save a few cycles here and there, preferably on the hot path. The way ahead was through decreasing the number of database connections we used and through using read-only connections wherever we could. And guess what, we even made the code clearer. Some of the excess database usage came due to some horrible, difficult-to-maintain spaghetti code. What I’m trying to say here is that you might work in fields where the runtime performance of your code is the most important aspect. Maybe in game development that’s the case. Maybe with microcontrollers as well. But there are many other fields where it’s different and even if you will have performance issues, that won’t be solved by writing code that mimics how the CPU thinks. Managing database connections and network usage is usually more important. On the other hand, if you write code that is easy to understand and easy to change, there is a fair chance that you won’t even introduce such problems, but if you do, it’ll be easier to recognize the root cause and eliminate the issue. “Clean Code” is more than the 5 rules it suggests I already expressed that I found the video irrelevant in regard to what I had to say. But I found other issues too. If you watch the video, you might have the impression that “Clean Code” is about 5 rules (and Muratori dislikes 4 of them). But even if you just open the book at its table of contents, you’ll see that it is about so many other things that are - seemingly - timeless. Clean Code discusses how to pass function arguments in a way that won’t lead to accidental swaps and often unnoticed bugs. Is it not important? I think it is and there are a few talks dealing with such problems at almost every C++ conference. Another topic in the book is the usage of meaningful, descriptive, easy-to-read names. You might think it’s obvious, but if you ever tried to understand a bigger corporate code base, you know that it’s not a piece of knowledge each developer was born with. At my second C++ On Sea conference, in 2020, Kate Gregory gave an awesome keynote on this topic. The Boy Scout rule applied to software development is another topic. Leave the code cleaner than you found it. Or if you want to avoid the term clean code, you can say leave the code in a better shape than you found it. I find that an essential rule to keep the codebase healthy. But that’s just 3 additional topics from the book, I haven’t even mentioned its guidance on how and when to write comments, the importance of consistent formatting, or the problem with returning nulls. Of course, there are some parts of the book that might be outdated or that would translate differently to other languages as we discussed the emergence of value-semantics-based patterns. But identifying “Clean Code” with the 5 rules he took and suggesting that “Clean Code” is the root of all evil when it comes to sluggish software is a bit of a far-fetched thought to my taste. I’m happy that at least the video doesn’t suggest that those who write maintainable code are responsible for severe issues in our society as we use more cycles than necessary… Conclusion Overall, if I had to answer Conor’s question in a few sentences, I would say that « “Clean Code” horrible performance » has nothing to do with my talk as he picked on the book and I used a different definition for clean code. Still, I also think that the “Clean Code” he refers to is much more than the 5 rules he took. At the same, I think that the performance implications of “Clean Code” or clean code applied to real-life problems rarely mean a bottleneck to software. Fields where this might be a problem are the niche and exception, not the rule. Software designed for decades to serve us usually has to deal with other problems, such as maintainability and managing dependencies. Even in terms of performance, network, DB, and I/O, in general, are more problematic than virtual function calls and the costs of OOP in general. Connect deeper If you liked this article, please hit on the like button, subscribe to my newsletter and let’s connect on Twitter!" /><meta property="og:description" content="This summer, I gave a talk at C++ On Sea about Why Clean Code is not the norm where at the end, Conor Hoekstra - who you might know from code_report or from other podcasts - asked me a question about what I think about the « “Clean” Code, horrible performance » video. I had not seen it, but I said in the beginning of July that it would be a nice topic for my blog. And here we are in September… :) Yes, it’s been more than two months. To be honest, I started to watch the video right in Folkestone once the conference ended and I stopped it a few minutes later. I didn’t like the style that I considered completely disrespectful or simply smug. Two months later, I decided to watch it. The style of someone shouldn’t prevent me from hearing what that person has to say. I still don’t like the style, which might have had an effect also on how I interpret his message. Still, I think it’s worth watching the video. We waste so much time scrolling social media, watching short videos for instant gratification and reading others’ rants on completely insignificant topics. This video has at least something to say. Even if you disagree with a big part of it. Let me summarize it in a paragraph. Casey Muratori finds “Clean Code” harmful in terms of performance. He attempts to showcase that following “Clean Code” guidelines you throw away decades of hardware improvements and therefore “Clean Code” is one of the reasons behind sluggish code. Muratori seems particularly against OOP and virtual functions. Below, let me share my answer not to Muratori, but to Conor as he asked me what I think about this video and in particular the performance implications of clean code. Why does this video have nothing to do with my talk? What would I have answered to Conor if I had known this video? First of all, I hope I made it clear in the very beginning of my presentation, that it’s about clean code and not about “Clean Code”. I was not talking about the books and work of Bob Martin. Even though I appreciate a lot his vision and I think the Clean Code series heavily influenced how I code and Uncle Bob pushed me in the good direction. Yet, in the talk, I didn’t refer to his “Clean Code” and the guidelines he shared. I referred to clean code as something more vague. I defined clean code as “something that is easy to understand and easy to change.” And with that, let me get back to the video. Muratori is obviously a very smart person who can write performant and correct code. A smart person, yet I think he acts … well, differently … and I think his goal is to make fun of “clean coders” and show them as incompetent programmers. Why do I say so? He said that he wouldn’t use a for loop with iterators because the book didn’t say so. The book used plain old for loops. I had a strong urge at that moment - again - to close the tab. The book is not language-specific and was written a long time ago. Plus it’s not written for morons who cannot make a single decision on their own and decide to go with a range-based for loop. Or was it? If iterators or a range-based loop is what makes a code “cleaner” then that is what you should use, it’s that simple. But I never wanted to get into such trouble and talk about specific rules that might depend on the language or even the standard you use, therefore I went with the above definition of clean code. Is that kind of code less performant than optimal? Yes! It is! And I know about it, probably most programmers do too. At each C++ Conference, usually among the lightning talks, you’ll find one or two which is about optimizing the last cycles out of some well-known and widely used standard functions. They are usually brilliant. And the people who present them on stage know more about the ins and outs of C++ than most of us. But even they wouldn’t use those optimized versions everywhere because those are usually difficult to understand and difficult to maintain. Let’s get back to the video. Is the performance of clean code really decades worse as Muratori claims? I doubt that, but I’m not going into a measurement war. Especially because we define clean code differently. Read C++ Software Design by Klaus Iglberger. Most of the patterns he shares have several versions. The ones using value semantics are usually clean and easy to maintain. In my opinion, even the author of Clean Code would consider them “clean” (I might be wrong), but I think Muratori would not as they are not based on runtime polymorphism. But would the lower performance matter that much? Not always. When isn’t “clean code” a bottleneck for performance? Muratori comes from a world where performance is king. Game development. I think he has to rely more on performant and optimized code than many others. I spent 10 years in the enterprise world, and nowadays I’m working on code behind mobile apps. Performance is not the only thing that matters and it might not even be among the most critical aspects. Let me share two stories with you. Horrible barely used code didn’t matter When I started my development journey in 2013, I was thrown into the deep water quickly. I wrote almost alone a new service for our backends. I wrote some horrible code and I received no meaningful code review on time. Such a badly managed project… Anyway, I shipped the code. It “worked”. The returned results were correct, but there were two issues: a huge memory footprint extremely slow code A talented but at the time not very experienced developer came by and he saw that something that I should have done in probably O(n) time was done in O(n^4). Yes, it was that bad, I was so clueless. I might have been new to development, but I was not completely without common sense. (Despite my horrible algorithm!) I was convinced that that little piece of code could not be responsible for the overall slowness of the service. I didn’t know how to measure performance correctly, but I had time, I had a spreadsheet and I had logs with timestamps. The service spent a fraction of the time in those two horrible functions. They were not responsible for our problems. I’m not saying that they should not have been corrected. They shouldn’t have been merged in the first place! What I’m saying is that they didn’t matter for the performance of the system overall. It turned out that the 3rd party library was performing initialization and cleanup at every invocation of the service instead of the startup/destruction of the backend itself. Once that was fixed, our performance and memory footprint issues were gone. The key to 10x traffic was not through removing virtual calls A few years ago I was working on a service which faced a 10x traffic growth in a few months. The service was already quite old, but we secured a contract with one of the biggest players in online travel. We shared our prediction with our business unit about how big of a growth our service could support, and we were right. Sadly, project managers didn’t really care until the service actually crashed. The way out of the situation was not through optimizing our code in terms of performance or through removing class hierarchies to save a few cycles here and there, preferably on the hot path. The way ahead was through decreasing the number of database connections we used and through using read-only connections wherever we could. And guess what, we even made the code clearer. Some of the excess database usage came due to some horrible, difficult-to-maintain spaghetti code. What I’m trying to say here is that you might work in fields where the runtime performance of your code is the most important aspect. Maybe in game development that’s the case. Maybe with microcontrollers as well. But there are many other fields where it’s different and even if you will have performance issues, that won’t be solved by writing code that mimics how the CPU thinks. Managing database connections and network usage is usually more important. On the other hand, if you write code that is easy to understand and easy to change, there is a fair chance that you won’t even introduce such problems, but if you do, it’ll be easier to recognize the root cause and eliminate the issue. “Clean Code” is more than the 5 rules it suggests I already expressed that I found the video irrelevant in regard to what I had to say. But I found other issues too. If you watch the video, you might have the impression that “Clean Code” is about 5 rules (and Muratori dislikes 4 of them). But even if you just open the book at its table of contents, you’ll see that it is about so many other things that are - seemingly - timeless. Clean Code discusses how to pass function arguments in a way that won’t lead to accidental swaps and often unnoticed bugs. Is it not important? I think it is and there are a few talks dealing with such problems at almost every C++ conference. Another topic in the book is the usage of meaningful, descriptive, easy-to-read names. You might think it’s obvious, but if you ever tried to understand a bigger corporate code base, you know that it’s not a piece of knowledge each developer was born with. At my second C++ On Sea conference, in 2020, Kate Gregory gave an awesome keynote on this topic. The Boy Scout rule applied to software development is another topic. Leave the code cleaner than you found it. Or if you want to avoid the term clean code, you can say leave the code in a better shape than you found it. I find that an essential rule to keep the codebase healthy. But that’s just 3 additional topics from the book, I haven’t even mentioned its guidance on how and when to write comments, the importance of consistent formatting, or the problem with returning nulls. Of course, there are some parts of the book that might be outdated or that would translate differently to other languages as we discussed the emergence of value-semantics-based patterns. But identifying “Clean Code” with the 5 rules he took and suggesting that “Clean Code” is the root of all evil when it comes to sluggish software is a bit of a far-fetched thought to my taste. I’m happy that at least the video doesn’t suggest that those who write maintainable code are responsible for severe issues in our society as we use more cycles than necessary… Conclusion Overall, if I had to answer Conor’s question in a few sentences, I would say that « “Clean Code” horrible performance » has nothing to do with my talk as he picked on the book and I used a different definition for clean code. Still, I also think that the “Clean Code” he refers to is much more than the 5 rules he took. At the same, I think that the performance implications of “Clean Code” or clean code applied to real-life problems rarely mean a bottleneck to software. Fields where this might be a problem are the niche and exception, not the rule. Software designed for decades to serve us usually has to deal with other problems, such as maintainability and managing dependencies. Even in terms of performance, network, DB, and I/O, in general, are more problematic than virtual function calls and the costs of OOP in general. Connect deeper If you liked this article, please hit on the like button, subscribe to my newsletter and let’s connect on Twitter!" /><link rel="canonical" href="https://www.sandordargo.com/blog/2023/09/20/once-more-about-clean-code" /><meta property="og:url" content="https://www.sandordargo.com/blog/2023/09/20/once-more-about-clean-code" /><meta property="og:site_name" content="Sandor Dargo’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-09-20T00:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Once more about clean code" /><meta name="twitter:site" content="@SandorDargo" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-09-20T00:00:00+02:00","datePublished":"2023-09-20T00:00:00+02:00","description":"This summer, I gave a talk at C++ On Sea about Why Clean Code is not the norm where at the end, Conor Hoekstra - who you might know from code_report or from other podcasts - asked me a question about what I think about the « “Clean” Code, horrible performance » video. I had not seen it, but I said in the beginning of July that it would be a nice topic for my blog. And here we are in September… :) Yes, it’s been more than two months. To be honest, I started to watch the video right in Folkestone once the conference ended and I stopped it a few minutes later. I didn’t like the style that I considered completely disrespectful or simply smug. Two months later, I decided to watch it. The style of someone shouldn’t prevent me from hearing what that person has to say. I still don’t like the style, which might have had an effect also on how I interpret his message. Still, I think it’s worth watching the video. We waste so much time scrolling social media, watching short videos for instant gratification and reading others’ rants on completely insignificant topics. This video has at least something to say. Even if you disagree with a big part of it. Let me summarize it in a paragraph. Casey Muratori finds “Clean Code” harmful in terms of performance. He attempts to showcase that following “Clean Code” guidelines you throw away decades of hardware improvements and therefore “Clean Code” is one of the reasons behind sluggish code. Muratori seems particularly against OOP and virtual functions. Below, let me share my answer not to Muratori, but to Conor as he asked me what I think about this video and in particular the performance implications of clean code. Why does this video have nothing to do with my talk? What would I have answered to Conor if I had known this video? First of all, I hope I made it clear in the very beginning of my presentation, that it’s about clean code and not about “Clean Code”. I was not talking about the books and work of Bob Martin. Even though I appreciate a lot his vision and I think the Clean Code series heavily influenced how I code and Uncle Bob pushed me in the good direction. Yet, in the talk, I didn’t refer to his “Clean Code” and the guidelines he shared. I referred to clean code as something more vague. I defined clean code as “something that is easy to understand and easy to change.” And with that, let me get back to the video. Muratori is obviously a very smart person who can write performant and correct code. A smart person, yet I think he acts … well, differently … and I think his goal is to make fun of “clean coders” and show them as incompetent programmers. Why do I say so? He said that he wouldn’t use a for loop with iterators because the book didn’t say so. The book used plain old for loops. I had a strong urge at that moment - again - to close the tab. The book is not language-specific and was written a long time ago. Plus it’s not written for morons who cannot make a single decision on their own and decide to go with a range-based for loop. Or was it? If iterators or a range-based loop is what makes a code “cleaner” then that is what you should use, it’s that simple. But I never wanted to get into such trouble and talk about specific rules that might depend on the language or even the standard you use, therefore I went with the above definition of clean code. Is that kind of code less performant than optimal? Yes! It is! And I know about it, probably most programmers do too. At each C++ Conference, usually among the lightning talks, you’ll find one or two which is about optimizing the last cycles out of some well-known and widely used standard functions. They are usually brilliant. And the people who present them on stage know more about the ins and outs of C++ than most of us. But even they wouldn’t use those optimized versions everywhere because those are usually difficult to understand and difficult to maintain. Let’s get back to the video. Is the performance of clean code really decades worse as Muratori claims? I doubt that, but I’m not going into a measurement war. Especially because we define clean code differently. Read C++ Software Design by Klaus Iglberger. Most of the patterns he shares have several versions. The ones using value semantics are usually clean and easy to maintain. In my opinion, even the author of Clean Code would consider them “clean” (I might be wrong), but I think Muratori would not as they are not based on runtime polymorphism. But would the lower performance matter that much? Not always. When isn’t “clean code” a bottleneck for performance? Muratori comes from a world where performance is king. Game development. I think he has to rely more on performant and optimized code than many others. I spent 10 years in the enterprise world, and nowadays I’m working on code behind mobile apps. Performance is not the only thing that matters and it might not even be among the most critical aspects. Let me share two stories with you. Horrible barely used code didn’t matter When I started my development journey in 2013, I was thrown into the deep water quickly. I wrote almost alone a new service for our backends. I wrote some horrible code and I received no meaningful code review on time. Such a badly managed project… Anyway, I shipped the code. It “worked”. The returned results were correct, but there were two issues: a huge memory footprint extremely slow code A talented but at the time not very experienced developer came by and he saw that something that I should have done in probably O(n) time was done in O(n^4). Yes, it was that bad, I was so clueless. I might have been new to development, but I was not completely without common sense. (Despite my horrible algorithm!) I was convinced that that little piece of code could not be responsible for the overall slowness of the service. I didn’t know how to measure performance correctly, but I had time, I had a spreadsheet and I had logs with timestamps. The service spent a fraction of the time in those two horrible functions. They were not responsible for our problems. I’m not saying that they should not have been corrected. They shouldn’t have been merged in the first place! What I’m saying is that they didn’t matter for the performance of the system overall. It turned out that the 3rd party library was performing initialization and cleanup at every invocation of the service instead of the startup/destruction of the backend itself. Once that was fixed, our performance and memory footprint issues were gone. The key to 10x traffic was not through removing virtual calls A few years ago I was working on a service which faced a 10x traffic growth in a few months. The service was already quite old, but we secured a contract with one of the biggest players in online travel. We shared our prediction with our business unit about how big of a growth our service could support, and we were right. Sadly, project managers didn’t really care until the service actually crashed. The way out of the situation was not through optimizing our code in terms of performance or through removing class hierarchies to save a few cycles here and there, preferably on the hot path. The way ahead was through decreasing the number of database connections we used and through using read-only connections wherever we could. And guess what, we even made the code clearer. Some of the excess database usage came due to some horrible, difficult-to-maintain spaghetti code. What I’m trying to say here is that you might work in fields where the runtime performance of your code is the most important aspect. Maybe in game development that’s the case. Maybe with microcontrollers as well. But there are many other fields where it’s different and even if you will have performance issues, that won’t be solved by writing code that mimics how the CPU thinks. Managing database connections and network usage is usually more important. On the other hand, if you write code that is easy to understand and easy to change, there is a fair chance that you won’t even introduce such problems, but if you do, it’ll be easier to recognize the root cause and eliminate the issue. “Clean Code” is more than the 5 rules it suggests I already expressed that I found the video irrelevant in regard to what I had to say. But I found other issues too. If you watch the video, you might have the impression that “Clean Code” is about 5 rules (and Muratori dislikes 4 of them). But even if you just open the book at its table of contents, you’ll see that it is about so many other things that are - seemingly - timeless. Clean Code discusses how to pass function arguments in a way that won’t lead to accidental swaps and often unnoticed bugs. Is it not important? I think it is and there are a few talks dealing with such problems at almost every C++ conference. Another topic in the book is the usage of meaningful, descriptive, easy-to-read names. You might think it’s obvious, but if you ever tried to understand a bigger corporate code base, you know that it’s not a piece of knowledge each developer was born with. At my second C++ On Sea conference, in 2020, Kate Gregory gave an awesome keynote on this topic. The Boy Scout rule applied to software development is another topic. Leave the code cleaner than you found it. Or if you want to avoid the term clean code, you can say leave the code in a better shape than you found it. I find that an essential rule to keep the codebase healthy. But that’s just 3 additional topics from the book, I haven’t even mentioned its guidance on how and when to write comments, the importance of consistent formatting, or the problem with returning nulls. Of course, there are some parts of the book that might be outdated or that would translate differently to other languages as we discussed the emergence of value-semantics-based patterns. But identifying “Clean Code” with the 5 rules he took and suggesting that “Clean Code” is the root of all evil when it comes to sluggish software is a bit of a far-fetched thought to my taste. I’m happy that at least the video doesn’t suggest that those who write maintainable code are responsible for severe issues in our society as we use more cycles than necessary… Conclusion Overall, if I had to answer Conor’s question in a few sentences, I would say that « “Clean Code” horrible performance » has nothing to do with my talk as he picked on the book and I used a different definition for clean code. Still, I also think that the “Clean Code” he refers to is much more than the 5 rules he took. At the same, I think that the performance implications of “Clean Code” or clean code applied to real-life problems rarely mean a bottleneck to software. Fields where this might be a problem are the niche and exception, not the rule. Software designed for decades to serve us usually has to deal with other problems, such as maintainability and managing dependencies. Even in terms of performance, network, DB, and I/O, in general, are more problematic than virtual function calls and the costs of OOP in general. Connect deeper If you liked this article, please hit on the like button, subscribe to my newsletter and let’s connect on Twitter!","headline":"Once more about clean code","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.sandordargo.com/blog/2023/09/20/once-more-about-clean-code"},"url":"https://www.sandordargo.com/blog/2023/09/20/once-more-about-clean-code"}</script><title>Once more about clean code | Sandor Dargo's Blog</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-89625019-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-89625019-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/SANDOR_DARGO_ROUND.JPG" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Sandor Dargo's Blog</a></div><div class="site-subtitle font-italic">On C++, software development and books</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/books/" class="nav-link"> <i class="fa-fw fas fa-book ml-xl-3 mr-xl-3 unloaded"></i> <span>BOOKS</span> </a><li class="nav-item"> <a href="/speaking/" class="nav-link"> <i class="fa-fw fas fa-microphone ml-xl-3 mr-xl-3 unloaded"></i> <span>SPEAKING</span> </a><li class="nav-item"> <a href="/dailycpp/" class="nav-link"> <i class="fa-fw fas fa-link ml-xl-3 mr-xl-3 unloaded"></i> <span>DAILY C++</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>HI...</span> </a></ul><ul class="w-100"><li class="nav-item"> <a href="https://www.patreon.com/sandordargo" class="nav-link"> <img src="https://c5.patreon.com/external/logo/become_a_patron_button.png"></a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/sandordargo" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/SandorDargo" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['sandor.dargo','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/blog"> Blog </a> </span> <span> <a href="/2023"> 2023 </a> </span> <span> <a href="/09"> 09 </a> </span> <span> <a href="/20"> 20 </a> </span> <span>Once more about clean code</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Once more about clean code</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Sandor Dargo </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Sep 20, 2023, 12:00 AM +0200" prep="on" > Sep 20, 2023 <i class="unloaded">2023-09-20T00:00:00+02:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2000 words">11 min</span></div></div><div class="post-content"><p>This summer, I gave a talk at C++ On Sea about <a href="https://cpponsea.uk/2023/sessions/why-clean-code-is-not-the-norm.html">Why Clean Code is not the norm</a> where at the end, Conor Hoekstra - who you might know from <a href="https://www.youtube.com/c/codereport">code_report</a> or from other podcasts - asked me a question about what I think about the <a href="https://www.youtube.com/watch?v=tD5NrevFtbU">« “Clean” Code, horrible performance »</a> video.</p><p>I had not seen it, but I said in the beginning of July that it would be a nice topic for my blog.</p><p>And here we are in September… :)</p><p>Yes, it’s been more than two months.</p><p>To be honest, I started to watch the video right in Folkestone once the conference ended and I stopped it a few minutes later. I didn’t like the style that I considered completely disrespectful or simply smug. Two months later, I decided to watch it. The style of someone shouldn’t prevent me from hearing what that person has to say.</p><p>I still don’t like the style, which might have had an effect also on how I interpret his message.</p><p>Still, I think it’s worth <a href="https://www.youtube.com/watch?v=tD5NrevFtbU">watching the video</a>. We waste so much time scrolling social media, watching short videos for instant gratification and reading others’ rants on completely insignificant topics. This video has at least something to say. Even if you disagree with a big part of it.</p><p>Let me summarize it in a paragraph. Casey Muratori finds “Clean Code” harmful in terms of performance. He attempts to showcase that following “Clean Code” guidelines you throw away decades of hardware improvements and therefore “Clean Code” is one of the reasons behind sluggish code. Muratori seems particularly against OOP and virtual functions.</p><p>Below, let me share my answer not to Muratori, but to Conor as he asked me what I think about this video and in particular the performance implications of clean code.</p><h2 id="why-does-this-video-have-nothing-to-do-with-my-talk">Why does this video have nothing to do with my talk?</h2><p>What would I have answered to Conor if I had known this video? First of all, I hope I made it clear in the very beginning of my presentation, that it’s about clean code and not about “Clean Code”. I was not talking about <a href="https://www.sandordargo.com/blog/2018/03/14/most-important-books-to-start-with#clean-code-a-handbook-of-agile-software-craftsmanship">the books</a> and work of Bob Martin. Even though I appreciate a lot his vision and I think the Clean Code series heavily influenced how I code and Uncle Bob pushed me in the good direction.</p><p>Yet, in the talk, I didn’t refer to his “Clean Code” and the guidelines he shared. I referred to clean code as something more vague. I defined clean code as</p><blockquote><p><em>“something that is easy to understand and easy to change.”</em></p></blockquote><p>And with that, let me get back to the video.</p><p>Muratori is obviously a very smart person who can write performant and correct code. A smart person, yet I think he <strong>acts</strong> … well, differently … and I think his goal is to make fun of “clean coders” and show them as incompetent programmers.</p><p>Why do I say so? He said that he wouldn’t use a <code class="language-plaintext highlighter-rouge">for</code> loop with iterators because the book didn’t say so. The book used plain old <code class="language-plaintext highlighter-rouge">for</code> loops. I had a strong urge at that moment - again - to close the tab. The book is not language-specific and was written a long time ago. Plus it’s not written for morons who cannot make a single decision on their own and decide to go with a range-based <code class="language-plaintext highlighter-rouge">for</code> loop. Or was it?</p><p>If iterators or a range-based loop is what makes a code “cleaner” then that is what you should use, it’s that simple.</p><p>But I never wanted to get into such trouble and talk about specific rules that might depend on the language or even the standard you use, therefore I went with the above definition of clean code.</p><p>Is that kind of code less performant than optimal?</p><p>Yes! It is! And I know about it, probably most programmers do too.</p><p>At each C++ Conference, usually among the lightning talks, you’ll find one or two which is about optimizing the last cycles out of some well-known and widely used standard functions. They are usually brilliant. And the people who present them on stage know more about the ins and outs of C++ than most of us.</p><p>But even they wouldn’t use those optimized versions everywhere because those are usually difficult to understand and difficult to maintain.</p><p>Let’s get back to the video. Is the performance of clean code really decades worse as Muratori claims? I doubt that, but I’m not going into a measurement war. Especially because we define clean code differently.</p><p>Read <a href="https://www.sandordargo.com/blog/2022/12/17/cpp-software-design-by-klaus-iglberger">C++ Software Design by Klaus Iglberger</a>. Most of the patterns he shares have several versions. The ones using value semantics are usually clean and easy to maintain. In my opinion, even the author of Clean Code would consider them “clean” (I might be wrong), but I think Muratori would not as they are not based on runtime polymorphism.</p><p>But would the lower performance matter that much?</p><p>Not always.</p><h2 id="when-isnt-clean-code-a-bottleneck-for-performance">When isn’t “clean code” a bottleneck for performance?</h2><p>Muratori comes from a world where performance is king. Game development. I think he has to rely more on performant and optimized code than many others.</p><p>I spent 10 years in the enterprise world, and nowadays I’m working on code behind mobile apps.</p><p>Performance is not the only thing that matters and it might not even be among the most critical aspects.</p><p>Let me share two stories with you.</p><h3 id="horrible-barely-used-code-didnt-matter">Horrible barely used code didn’t matter</h3><p>When I started my development journey in 2013, I was thrown into the deep water quickly. I wrote almost alone a new service for our backends. I wrote some horrible code and I received no meaningful code review on time. Such a badly managed project… Anyway, I shipped the code. It “worked”. The returned results were correct, but there were two issues:</p><ul><li>a huge memory footprint<li>extremely slow code</ul><p>A talented but at the time not very experienced developer came by and he saw that something that I should have done in probably O(n) time was done in O(n^4). Yes, it was that bad, I was so clueless.</p><p>I might have been new to development, but I was not completely without common sense. (Despite my horrible algorithm!) I was convinced that that little piece of code could not be responsible for the overall slowness of the service. I didn’t know how to measure performance correctly, but I had time, I had a spreadsheet and I had logs with timestamps.</p><p>The service spent a fraction of the time in those two horrible functions. They were not responsible for our problems. I’m not saying that they should not have been corrected. They shouldn’t have been merged in the first place! What I’m saying is that they didn’t matter for the performance of the system overall. It turned out that the 3rd party library was performing initialization and cleanup at every invocation of the service instead of the startup/destruction of the backend itself.</p><p>Once that was fixed, our performance and memory footprint issues were gone.</p><h3 id="the-key-to-10x-traffic-was-not-through-removing-virtual-calls">The key to 10x traffic was not through removing virtual calls</h3><p>A few years ago I was working on a service which faced a 10x traffic growth in a few months. The service was already quite old, but we secured a contract with one of the biggest players in online travel.</p><p>We shared our prediction with our business unit about how big of a growth our service could support, and we were right. Sadly, project managers didn’t really care until the service actually crashed. The way out of the situation was not through optimizing our code in terms of performance or through removing class hierarchies to save a few cycles here and there, preferably on the hot path.</p><p>The way ahead was through decreasing the number of database connections we used and through using read-only connections wherever we could.</p><p>And guess what, we even made the code clearer. Some of the excess database usage came due to some horrible, difficult-to-maintain spaghetti code.</p><hr /><p>What I’m trying to say here is that you might work in fields where the runtime performance of your code is the most important aspect. Maybe in game development that’s the case. Maybe with microcontrollers as well. But there are many other fields where it’s different and even if you will have performance issues, that won’t be solved by writing code that mimics how the CPU thinks. Managing database connections and network usage is usually more important.</p><p>On the other hand, if you write code that is easy to understand and easy to change, there is a fair chance that you won’t even introduce such problems, but if you do, it’ll be easier to recognize the root cause and eliminate the issue.</p><h2 id="clean-code-is-more-than-the-5-rules-it-suggests">“Clean Code” is more than the 5 rules it suggests</h2><p>I already expressed that I found the video irrelevant in regard to what I had to say. But I found other issues too. If you watch the video, you might have the impression that “Clean Code” is about 5 rules (and Muratori dislikes 4 of them). But even if you just open the book at its table of contents, you’ll see that it is about so many other things that are - seemingly - timeless.</p><p>Clean Code discusses how to pass function arguments in a way that won’t lead to accidental swaps and often unnoticed bugs. Is it not important? I think it is and there are a few talks dealing with such problems at almost every C++ conference.</p><p>Another topic in the book is the usage of meaningful, descriptive, easy-to-read names. You might think it’s obvious, but if you ever tried to understand a bigger corporate code base, you know that it’s not a piece of knowledge each developer was born with. At my second C++ On Sea conference, in 2020, <a href="https://www.youtube.com/watch?v=MqugiGzricQ">Kate Gregory gave an awesome keynote on this topic</a>.</p><p>The Boy Scout rule applied to software development is another topic. Leave the code cleaner than you found it. Or if you want to avoid the term clean code, you can say leave the code in a better shape than you found it. I find that an essential rule to keep the codebase healthy.</p><p>But that’s just 3 additional topics from the book, I haven’t even mentioned its guidance on how and when to write comments, the importance of consistent formatting, or <a href="https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare/">the problem with returning nulls</a>.</p><p>Of course, there are some parts of the book that might be outdated or that would translate differently to other languages as we discussed the emergence of value-semantics-based patterns. But identifying “Clean Code” with the 5 rules he took and suggesting that “Clean Code” is the root of all evil when it comes to sluggish software is a bit of a far-fetched thought to my taste. I’m happy that at least the video doesn’t suggest that those who write maintainable code are responsible for severe issues in our society as we use more cycles than necessary…</p><h2 id="conclusion">Conclusion</h2><p>Overall, if I had to answer Conor’s question in a few sentences, I would say that « “Clean Code” horrible performance » has nothing to do with my talk as he picked on the book and I used a different definition for clean code. Still, I also think that the “Clean Code” he refers to is much more than the 5 rules he took.</p><p>At the same, I think that the performance implications of “Clean Code” or clean code applied to real-life problems rarely mean a bottleneck to software. Fields where this might be a problem are the niche and exception, not the rule.</p><p>Software designed for decades to serve us usually has to deal with other problems, such as maintainability and managing dependencies. Even in terms of performance, network, DB, and I/O, in general, are more problematic than virtual function calls and the costs of OOP in general.</p><h2 id="connect-deeper">Connect deeper</h2><p>If you liked this article, please</p><ul><li>hit on the like button,<li><a href="http://eepurl.com/gvcv1j">subscribe to my newsletter</a><li>and let’s connect on <a href="https://twitter.com/SandorDargo">Twitter</a>!</ul><a href="https://www.patreon.com/sandordargo" style="float: left; padding-left: 0;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://c5.patreon.com/external/logo/become_a_patron_button.png" style="float: left; padding-left: 0;"></a></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/dev/'>dev</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cleancode/" class="post-tag no-text-decoration" >cleancode</a> <a href="/tags/performance/" class="post-tag no-text-decoration" >performance</a> <a href="/tags/watercooler/" class="post-tag no-text-decoration" >watercooler</a> <a href="/tags/cpponsea/" class="post-tag no-text-decoration" >cpponsea</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><a href="https://www.patreon.com/sandordargo" style="float: left; padding-left: 0;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://c5.patreon.com/external/logo/become_a_patron_button.png" style="float: left; padding-left: 0;"></a><div class="share-wrapper"> <a href="https://www.patreon.com/sandordargo" style="float: left; padding-left: 0;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://c5.patreon.com/external/logo/become_a_patron_button.png" style="float: left; padding-left: 0;"></a> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Once more about clean code - Sandor Dargo's Blog&url=https://www.sandordargo.com/blog/2023/09/20/once-more-about-clean-code" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Once more about clean code - Sandor Dargo's Blog&u=https://www.sandordargo.com/blog/2023/09/20/once-more-about-clean-code" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Once more about clean code - Sandor Dargo's Blog&url=https://www.sandordargo.com/blog/2023/09/20/once-more-about-clean-code" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://news.ycombinator.com/submitlink?t=Once more about clean code - Sandor Dargo's Blog&u=https://www.sandordargo.com/blog/2023/09/20/once-more-about-clean-code" data-toggle="tooltip" data-placement="top" title="HackerNews" target="_blank" rel="noopener" aria-label="HackerNews"> <i class="fa-fw fab fa-hacker-news"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/blog/2025/10/22/trip-report-budapest-cpp">Trip report: Budapest C++ - Breaking & Building C++</a><li><a href="/blog/2025/10/01/cpp26-optional-of-reference">C++26: std::optional&lt;T&amp;&gt;</a><li><a href="/blog/2025/09/24/trip-report-cppcon-2025">Trip report: CppCon 2025</a><li><a href="/blog/2025/07/23/format-your-own-type-part-1">Format your own type (Part 1)</a><li><a href="/blog/2025/07/02/cpponsea-trip-report">Trip report: C++ On Sea 2025</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cpp/">cpp</a> <a class="post-tag" href="/tags/books/">books</a> <a class="post-tag" href="/tags/watercooler/">watercooler</a> <a class="post-tag" href="/tags/career/">career</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/cpp23/">cpp23</a> <a class="post-tag" href="/tags/stl/">stl</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/self-improvement/">self-improvement</a> <a class="post-tag" href="/tags/management/">management</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/blog/2020/01/22/crime-scene-and-x-ray"><div class="card-body"> <span class="timeago small" > Jan 22, 2020 <i class="unloaded">2020-01-22T00:00:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Your Code as a Crime Scene and Software Design X-Rays by Adam Tornhill</h3><div class="text-muted small"><p> Usually, I write about one single book in a given article, but this is a peculiar occasion. Last months I read both books written by Adam Tornhill: Your Code as a Crime Scene (YCCS) and Software De...</p></div></div></a></div><div class="card"> <a href="/blog/2024/10/23/different-aspects-of-software-performance"><div class="card-body"> <span class="timeago small" > Oct 23, 2024 <i class="unloaded">2024-10-23T00:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Different aspects of software performance</h3><div class="text-muted small"><p> Though the main topic of this blog is not clean code or Clean Code, we discuss from time to time patterns that will lead to cleaner, more understandable, more maintainable code. Sometimes we even ...</p></div></div></a></div><div class="card"> <a href="/blog/2023/01/25/deep-vs-shallow-modules"><div class="card-body"> <span class="timeago small" > Jan 25, 2023 <i class="unloaded">2023-01-25T00:00:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Deep vs shallow modules</h3><div class="text-muted small"><p> I keep telling that I don’t post negative book reviews. It’s because no matter how much I dislike a book, I can be pretty sure that the author made a huge effort writing it. I have absolutely no re...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/blog/2023/09/13/constexpr-and-binary-sizes" class="btn btn-outline-primary" prompt="Older"><p>Constexpr functions for smaller binary size?</p></a> <a href="/blog/2023/09/27/a-few-words-on-scripts-and-automation" class="btn btn-outline-primary" prompt="Newer"><p>Be a good gardener of your scripts</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//sandordargo-github-io.disqus.com/embed.js', disqusConfig: function() { this.page.title = 'Once more about clean code'; this.page.url = 'https://www.sandordargo.com/blog/2023/09/20/once-more-about-clean-code'; this.page.identifier = '/blog/2023/09/20/once-more-about-clean-code'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><div id="amzn-assoc-ad-be5a767b-3346-40aa-bc00-2eff0ce33d2b"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=be5a767b-3346-40aa-bc00-2eff0ce33d2b"></script> <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script> <script type="text/javascript" src="//downloads.mailchimp.com/js/signup-forms/popup/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script><script type="text/javascript">require(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us16.list-manage.com","uuid":"b073dbd5c29322302f59a8cd8","lid":"d26240427e"}) })</script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/SandorDargo">Sandor Dargo</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/cpp/">cpp</a> <a class="post-tag" href="/tags/books/">books</a> <a class="post-tag" href="/tags/watercooler/">watercooler</a> <a class="post-tag" href="/tags/career/">career</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/cpp23/">cpp23</a> <a class="post-tag" href="/tags/stl/">stl</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/self-improvement/">self improvement</a> <a class="post-tag" href="/tags/management/">management</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://www.sandordargo.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
