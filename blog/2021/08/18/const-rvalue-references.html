<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="const rvalue references" /><meta property="og:locale" content="en_US" /><meta name="description" content="Recently I facilitated a workshop at C++OnSea. It went well, but there was one topic that I couldn’t deliver as well as I wanted. You might have guessed it right, it was about const rvalue references." /><meta property="og:description" content="Recently I facilitated a workshop at C++OnSea. It went well, but there was one topic that I couldn’t deliver as well as I wanted. You might have guessed it right, it was about const rvalue references." /><link rel="canonical" href="https://www.sandordargo.com/blog/2021/08/18/const-rvalue-references" /><meta property="og:url" content="https://www.sandordargo.com/blog/2021/08/18/const-rvalue-references" /><meta property="og:site_name" content="Sandor Dargo’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-08-18T00:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="const rvalue references" /><meta name="twitter:site" content="@SandorDargo" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-11-15T22:02:21+01:00","datePublished":"2021-08-18T00:00:00+02:00","description":"Recently I facilitated a workshop at C++OnSea. It went well, but there was one topic that I couldn’t deliver as well as I wanted. You might have guessed it right, it was about const rvalue references.","headline":"const rvalue references","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.sandordargo.com/blog/2021/08/18/const-rvalue-references"},"url":"https://www.sandordargo.com/blog/2021/08/18/const-rvalue-references"}</script><title>const rvalue references | Sandor Dargo's Blog</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-89625019-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-89625019-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/SANDOR_DARGO_ROUND.JPG" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Sandor Dargo's Blog</a></div><div class="site-subtitle font-italic">On C++, software development and books</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/books/" class="nav-link"> <i class="fa-fw fas fa-book ml-xl-3 mr-xl-3 unloaded"></i> <span>BOOKS</span> </a><li class="nav-item"> <a href="/speaking/" class="nav-link"> <i class="fa-fw fas fa-microphone ml-xl-3 mr-xl-3 unloaded"></i> <span>SPEAKING</span> </a><li class="nav-item"> <a href="/dailycpp/" class="nav-link"> <i class="fa-fw fas fa-link ml-xl-3 mr-xl-3 unloaded"></i> <span>DAILY C++</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>HI...</span> </a></ul><ul class="w-100"><li class="nav-item"> <a href="https://www.patreon.com/sandordargo" class="nav-link"> <img src="https://c5.patreon.com/external/logo/become_a_patron_button.png"></a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/sandordargo" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/SandorDargo" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['sandor.dargo','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/blog"> Blog </a> </span> <span> <a href="/2021"> 2021 </a> </span> <span> <a href="/08"> 08 </a> </span> <span> <a href="/18"> 18 </a> </span> <span>const rvalue references</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>const rvalue references</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Sandor Dargo </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Aug 18, 2021, 12:00 AM +0200" prep="on" > Aug 18, 2021 <i class="unloaded">2021-08-18T00:00:00+02:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, Nov 15, 2023, 10:02 PM +0100" prefix="Updated " > Nov 15, 2023 <i class="unloaded">2023-11-15T22:02:21+01:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1625 words">9 min</span></div></div><div class="post-content"><p>Recently I facilitated a workshop at <a href="https://cpponsea.uk/2021/sessions/workshop_how-to-use-correctly-the-const-qualifier.html">C++OnSea</a>. It went well, but there was one topic that I couldn’t deliver as well as I wanted. You might have guessed it right, it was about <code class="language-plaintext highlighter-rouge">const</code> rvalue references.</p><h2 id="what-are-rvalue-references">What are rvalue references?</h2><p>Rvalue references were introduced to C++ with C++11. Since then, we refer to the traditional references (marked with one <code class="language-plaintext highlighter-rouge">&amp;</code>) as lvalue references.</p><p>With the use of rvalue (<code class="language-plaintext highlighter-rouge">&amp;&amp;</code>) references, we can avoid logically unnecessary copying by moving the values instead of making an extra copy with the sacrifice of potentially leaving the original value in an unusable state.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">MyObject</span> <span class="n">a</span><span class="p">{</span><span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">};</span>
<span class="n">MyObject</span> <span class="n">b</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="n">a</span><span class="p">.</span><span class="n">foo</span><span class="p">()</span> <span class="c1">// Don't do this, it's unsafe, potentially a is in a default constructed state or worse</span>
</pre></table></code></div></div><p>As said, with the help of rvalue references we can limit unnecessary copying and implement perfect forwarding functions, thus achieving higher performance and more robust libraries.</p><p>If we try to define rvalue references in contrast with lvaule references, we can say that an lvalue is an expression whose address can be taken, as such an lvalue reference is a locator value.</p><p>At the same time, an rvalue is an unnamed value that exists only during the evaluation of an expression.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">13</span><span class="p">;</span> <span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span> <span class="c1">// i is an lvalue</span>
    
    <span class="kt">int</span><span class="o">&amp;</span> <span class="n">lvri</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>     <span class="c1">// lvri is an lvalue reference</span>
    
    <span class="kt">int</span><span class="o">&amp;&amp;</span> <span class="n">rvrt</span> <span class="o">=</span> <span class="n">f</span><span class="p">();</span> <span class="c1">// rvrt is rvalue reference to temporary rvalue returned by f()</span>
    
    <span class="kt">int</span><span class="o">&amp;&amp;</span> <span class="n">rvrl</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>   <span class="c1">// rvalue reference to a literal!</span>
    
    <span class="c1">// int&amp;&amp; rv3 = i;   // ERROR, cannot bind int&amp;&amp; to int lvalue</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span> <span class="o">&lt;&lt;</span>  <span class="n">lvri</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span> 
              <span class="o">&lt;&lt;</span> <span class="n">rvrt</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span> <span class="o">&lt;&lt;</span> <span class="n">rvrl</span> <span class="o">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>In other terms, <em>“an lvalue is an expression that refers to a memory location and allows us to take the address of that memory location via the <code class="language-plaintext highlighter-rouge">&amp;</code> operator. An rvalue is an expression that is not an lvalue.”</em> (<a href="http://thbecker.net/articles/rvalue_references/section_01.html">source</a>)</p><p>From one point of view, we might say that if you have a temporary value on the right, why would anyone want to modify it.</p><p>But on the other hand, we said that rvalue references are used for removing unnecessary copying, they are used with move semantics. If we “move away” from a variable, it implies modification.</p><p>Why would anyone (and how!) make such move-away variables <code class="language-plaintext highlighter-rouge">const</code>?</p><h2 id="binding-rules">Binding rules</h2><p>Given the above constraint, not surprisingly, the canonical signatures of the move assignment operator and of the move constructor use non-<code class="language-plaintext highlighter-rouge">const</code> rvalue references.</p><p>But that doesn’t mean that <code class="language-plaintext highlighter-rouge">const T&amp;&amp;</code> doesn’t exist. It does, it’s syntactically completely valid.</p><p>It’s not simply syntactically valid, but the language has clear, well-defined binding rules for it.</p><p>For our binding examples, we’ll use the following four overloads of a simple function <code class="language-plaintext highlighter-rouge">f</code>.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"lvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>  <span class="c1">// #1</span>
<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"const lvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>  <span class="c1">// #2</span>
<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"rvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// #3</span>
<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"const rvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// #4</span>
</pre></table></code></div></div><p>If you have a non-<code class="language-plaintext highlighter-rouge">const</code> rvalue reference, it can be used with any of these, but the non-<code class="language-plaintext highlighter-rouge">const</code> lvalue reference (#1). The first choice is <code class="language-plaintext highlighter-rouge">f(T&amp;&amp;)</code>, then <code class="language-plaintext highlighter-rouge">f(const T&amp;&amp;)</code> and finally <code class="language-plaintext highlighter-rouge">f(const T&amp;)</code>.</p><p>But if none of those is available, only <code class="language-plaintext highlighter-rouge">f(T&amp;)</code>, you’ll get the following error message:</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span>
<span class="k">struct</span> <span class="nc">T</span> <span class="p">{};</span>

<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"lvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>  <span class="c1">// #1</span>
<span class="c1">// void f(const T&amp;) { std::cout &lt;&lt; "const lvalue ref\n"; }  // #2</span>
<span class="c1">// void f(T&amp;&amp;) { std::cout &lt;&lt; "rvalue ref\n"; } // #3</span>
<span class="c1">// void f(const T&amp;&amp;) { std::cout &lt;&lt; "const rvalue ref\n"; } // #4</span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">f</span><span class="p">(</span><span class="n">T</span><span class="p">{});</span> <span class="c1">// rvalue #3, #4, #2</span>
<span class="p">}</span>
<span class="cm">/*
main.cpp:12:8: error: cannot bind non-`const` lvalue reference of type 'T&amp;' to an rvalue of type 'T'
   12 |     f (T{}); // rvalue        #3, #4, #2
      |    
*/</span>
</pre></table></code></div></div><p>So an rvalue can be used both with rvalue overloads and a const lvalue reference. It’s a little bit of a mixture.</p><p>If we have an lvalue, that can be used only with <code class="language-plaintext highlighter-rouge">f(T&amp;)</code> and <code class="language-plaintext highlighter-rouge">f(const T&amp;)</code>.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span>
<span class="k">struct</span> <span class="nc">T</span> <span class="p">{};</span>

<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"lvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>  <span class="c1">// #1</span>
<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"const lvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>  <span class="c1">// #2</span>
<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"rvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// #3</span>
<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"const rvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// #4</span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">T</span> <span class="n">t</span><span class="p">;</span>
    <span class="n">f</span><span class="p">(</span><span class="n">t</span><span class="p">);</span> <span class="c1">// #1, #2</span>
<span class="p">}</span>
</pre></table></code></div></div><p>There is a little bit of asymmetry here.</p><p>Can we “fix” this asymmetry? Is there any option that can be used only with the rvalue overloads?</p><p>No. If we take a <code class="language-plaintext highlighter-rouge">const</code> rvalue reference, it can be used with the <code class="language-plaintext highlighter-rouge">f(const T&amp;&amp;)</code> and <code class="language-plaintext highlighter-rouge">f(const T&amp;)</code>, but not with any of the non-<code class="language-plaintext highlighter-rouge">const</code> references.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span>
<span class="k">struct</span> <span class="nc">T</span> <span class="p">{};</span>

<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"lvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>  <span class="c1">// #1</span>
<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"const lvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>  <span class="c1">// #2</span>
<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"rvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// #3</span>
<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"const rvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// #4</span>

<span class="k">const</span> <span class="n">T</span> <span class="nf">g</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">T</span><span class="p">{};</span> <span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">());</span> <span class="c1">// #4, #2</span>
<span class="p">}</span>
</pre></table></code></div></div><p><em>By the way, don’t return <code class="language-plaintext highlighter-rouge">const</code> values from a function, because you make it impossible to use move semantics. <a href="https://www.sandordargo.com/blog/2020/11/18/when-use-const-3-return-types">Find more info here.</a></em></p><blockquote><p>As a reader pointed out, if <code class="language-plaintext highlighter-rouge">g()</code> returned <code class="language-plaintext highlighter-rouge">const int</code> instead of <code class="language-plaintext highlighter-rouge">const T</code>, the output would be different. The call would bind to <code class="language-plaintext highlighter-rouge">f(int&amp;&amp;)</code></p><p>After some investigation and <a href="https://twitter.com/SandorDargo/status/1723294485252104366">help from the community</a>, here is the answer:</p><ul><li>if a prvalue initally has the type <code class="language-plaintext highlighter-rouge">cv T</code> where <code class="language-plaintext highlighter-rouge">T</code> is a cv-unqualified non-class, non-array type, the type of the expression is adjusted to <code class="language-plaintext highlighter-rouge">T</code> prior to any further investigation</ul></blockquote><h2 id="when-to-use-const-rvalue-references">When to use const rvalue references?</h2><p>Let’s turn it around a bit. A lvalue overload can accept both lvalues and rvalues, but an rvalue overload can only accept rvalues.</p><p>The goal of rvalue references is sparing copies and using move semantics. At the same time, we cannot move away from const values. Therefore the usage of <code class="language-plaintext highlighter-rouge">const</code> rvalue references communicates that</p><ul><li>a given operation is only supported on rvalues<li>but we still make a copy, as we cannot move.</ul><p>We haven’t seen a lot the need for this. For a potential example with unique pointers <a href="https://stackoverflow.com/a/60587511/3238101">check out this StackOverflow answer</a>.</p><p>What is important to note is that <code class="language-plaintext highlighter-rouge">f(const T&amp;&amp;)</code> can take both <code class="language-plaintext highlighter-rouge">T&amp;&amp;</code> and <code class="language-plaintext highlighter-rouge">const T&amp;&amp;</code>, while <code class="language-plaintext highlighter-rouge">f(T&amp;&amp;)</code> can only take the non-<code class="language-plaintext highlighter-rouge">const</code> rvalue reference and not the const one.</p><p>Therefore if you want to prohibit rvalue references, you should delete the <code class="language-plaintext highlighter-rouge">f(const T&amp;&amp;)</code> overload.</p><p>What would happen otherwise?</p><p>If you delete the non-<code class="language-plaintext highlighter-rouge">const</code> overload, the compilation will fail with rvalue references, but even though it doesn’t make much sense in general to pass <code class="language-plaintext highlighter-rouge">const</code> rvalue references, the code will compile.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span>
<span class="k">struct</span> <span class="nc">T</span><span class="p">{};</span>

<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"lvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"const lvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">void</span> <span class="n">f</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span> <span class="c1">//{ std::cout &lt;&lt; "rvalue ref\n"; }</span>
<span class="c1">// void f(const T&amp;&amp;) { std::cout &lt;&lt; "const rvalue ref\n"; }</span>

<span class="k">const</span> <span class="n">T</span> <span class="nf">g</span><span class="p">()</span> <span class="p">{</span>
 <span class="k">return</span> <span class="n">T</span><span class="p">{};</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">());</span>
<span class="p">}</span>
<span class="cm">/*
const lvalue ref
*/</span>
</pre></table></code></div></div><p>However, if we delete the <code class="language-plaintext highlighter-rouge">const T&amp;&amp;</code> overload, we make sure that no rvalue references are accepted at all.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span>
<span class="k">struct</span> <span class="nc">T</span><span class="p">{};</span>

<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"lvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span><span class="p">)</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"const lvalue ref</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
<span class="c1">// void f(T&amp;&amp;) = delete; //{ std::cout &lt;&lt; "rvalue ref\n"; }</span>
<span class="kt">void</span> <span class="n">f</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span> <span class="c1">//{ std::cout &lt;&lt; "const rvalue ref\n"; }</span>

<span class="k">const</span> <span class="n">T</span> <span class="nf">g</span><span class="p">()</span> <span class="p">{</span>
 <span class="k">return</span> <span class="n">T</span><span class="p">{};</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">());</span>
    <span class="n">f</span><span class="p">(</span><span class="n">T</span><span class="p">{});</span>
<span class="p">}</span>
<span class="cm">/*
main.cpp: In function 'int main()':
main.cpp:15:6: error: use of deleted function 'void f(const T&amp;&amp;)'
   15 |     f(g());
      |     ~^~~~~
main.cpp:8:6: note: declared here
    8 | void f(const T&amp;&amp;) = delete; //{ std::cout &lt;&lt; "const rvalue ref\n"; }
      |      ^
main.cpp:16:6: error: use of deleted function 'void f(const T&amp;&amp;)'
   16 |     f(T{});
      |     ~^~~~~
main.cpp:8:6: note: declared here
    8 | void f(const T&amp;&amp;) = delete; //{ std::cout &lt;&lt; "const rvalue ref\n"; }
      |      ^
*/</span>
</pre></table></code></div></div><p>So due to the binding rules, we can only make sure by deleting the <code class="language-plaintext highlighter-rouge">const</code> version that no rvalue references are accepted.</p><p>You can observe this the standard library too, for example with <a href="https://github.com/microsoft/STL/blob/1ece8a0352327397997c3f4b649a228c66da3ce1/stl/inc/type_traits#L1967-L1981"><code class="language-plaintext highlighter-rouge">std::reference_wrapper::ref</code> and <code class="language-plaintext highlighter-rouge">std::reference_wrapper::cref</code></a>.</p><h2 id="conclusion">Conclusion</h2><p>Today we discussed <code class="language-plaintext highlighter-rouge">const</code> rvalue references. We saw that although at a first glance they don’t make much sense, they are still useful. Rvalue references in general are used with move semantics which implies modifying the referred object, but in some rare cases, it might have a good semantic meaning. At the same time, it’s also used with <code class="language-plaintext highlighter-rouge">=delete</code> to prohibit rvalue references in a bulletproof way.</p><p>Let me know if you’ve ever used <code class="language-plaintext highlighter-rouge">const</code> rvalue references in your code!</p><h2 id="references">References</h2><ul><li><a href="https://accu.org/journals/overload/12/61/kilpelainen_227/">Lvalues and Rvalues By Mikael Kilpeläinen</a><li><a href="http://thbecker.net/articles/rvalue_references/section_01.html">C++ Rvalue References Explained by Thomas Becker</a><li><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2027.html">A Brief Introduction to Rvalue References by Howard E. Hinnant, Bjarne Stroustrup and Bronek Kozicki</a><li><a href="https://www.codesynthesis.com/~boris/blog/2012/07/24/const-rvalue-references/">What are const rvalue references good for? by Boris Kolpackov</a></ul><a href="https://www.patreon.com/sandordargo" style="float: left; padding-left: 0;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://c5.patreon.com/external/logo/become_a_patron_button.png" style="float: left; padding-left: 0;"></a></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/dev/'>dev</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cpp/" class="post-tag no-text-decoration" >cpp</a> <a href="/tags/tutorial/" class="post-tag no-text-decoration" >tutorial</a> <a href="/tags/const/" class="post-tag no-text-decoration" >const</a> <a href="/tags/rvalue/" class="post-tag no-text-decoration" >rvalue</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><a href="https://www.patreon.com/sandordargo" style="float: left; padding-left: 0;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://c5.patreon.com/external/logo/become_a_patron_button.png" style="float: left; padding-left: 0;"></a><div class="share-wrapper"> <a href="https://www.patreon.com/sandordargo" style="float: left; padding-left: 0;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://c5.patreon.com/external/logo/become_a_patron_button.png" style="float: left; padding-left: 0;"></a> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=const rvalue references - Sandor Dargo's Blog&url=https://www.sandordargo.com/blog/2021/08/18/const-rvalue-references" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=const rvalue references - Sandor Dargo's Blog&u=https://www.sandordargo.com/blog/2021/08/18/const-rvalue-references" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=const rvalue references - Sandor Dargo's Blog&url=https://www.sandordargo.com/blog/2021/08/18/const-rvalue-references" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://news.ycombinator.com/submitlink?t=const rvalue references - Sandor Dargo's Blog&u=https://www.sandordargo.com/blog/2021/08/18/const-rvalue-references" data-toggle="tooltip" data-placement="top" title="HackerNews" target="_blank" rel="noopener" aria-label="HackerNews"> <i class="fa-fw fab fa-hacker-news"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/blog/2026/01/21/clocks-part-8-cpp20-timezones">Time in C++: C++20 Brought Us Time Zones</a><li><a href="/blog/2019/04/10/lesson-of-a-booking-dont-trust-the-system">Lesson of a booking: Don't trust the system!</a><li><a href="/blog/2020/07/22/always-catch-exceptions-by-reference">Why should we always catch exceptions by reference?</a><li><a href="/blog/2020/11/28/emergent-design">Emergent Design: The Evolutionary Nature of Professional Software Development by Scott Bain</a><li><a href="/blog/2021/10/06/airy-code-reviews">Bring some fresh AIR and write effective code review comments</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cpp/">cpp</a> <a class="post-tag" href="/tags/books/">books</a> <a class="post-tag" href="/tags/watercooler/">watercooler</a> <a class="post-tag" href="/tags/career/">career</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/cpp23/">cpp23</a> <a class="post-tag" href="/tags/stl/">stl</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/self-improvement/">self-improvement</a> <a class="post-tag" href="/tags/management/">management</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/blog/2020/11/04/when-use-const-1-functions-local-variables"><div class="card-body"> <span class="timeago small" > Nov 4, 2020 <i class="unloaded">2020-11-04T00:00:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>When to use const in C++? Part I: functions and local variables</h3><div class="text-muted small"><p> Just make everything const that you can! That’s the bare minimum you could do for your compiler! This is a piece of advice, many senior developers tend to repeat to juniors, while so often even th...</p></div></div></a></div><div class="card"> <a href="/blog/2020/11/11/when-use-const-2-member-variables"><div class="card-body"> <span class="timeago small" > Nov 11, 2020 <i class="unloaded">2020-11-11T00:00:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>When to use const in C++? Part II: member variables</h3><div class="text-muted small"><p> Just make everything const that you can! That’s the bare minimum you could do for your compiler! This is a piece of advice, many senior developers tend to repeat to juniors, while so often even th...</p></div></div></a></div><div class="card"> <a href="/blog/2020/11/18/when-use-const-3-return-types"><div class="card-body"> <span class="timeago small" > Nov 18, 2020 <i class="unloaded">2020-11-18T00:00:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>When to use const in C++? Part III: return types</h3><div class="text-muted small"><p> Just make everything const that you can! That’s the bare minimum you could do for your compiler! This is a piece of advice, many senior developers tend to repeat to juniors, while so often even th...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/blog/2021/08/14/the-seniority-trap-stand-up-for-yourself" class="btn btn-outline-primary" prompt="Older"><p>Stand up for yourself and for your values</p></a> <a href="/blog/2021/08/25/ooda_loop_decision_making" class="btn btn-outline-primary" prompt="Newer"><p>OODA loop: The blueprint of our decision making</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//sandordargo-github-io.disqus.com/embed.js', disqusConfig: function() { this.page.title = 'const rvalue references'; this.page.url = 'https://www.sandordargo.com/blog/2021/08/18/const-rvalue-references'; this.page.identifier = '/blog/2021/08/18/const-rvalue-references'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><div id="amzn-assoc-ad-be5a767b-3346-40aa-bc00-2eff0ce33d2b"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=be5a767b-3346-40aa-bc00-2eff0ce33d2b"></script> <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script> <script type="text/javascript" src="//downloads.mailchimp.com/js/signup-forms/popup/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script><script type="text/javascript">require(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us16.list-manage.com","uuid":"b073dbd5c29322302f59a8cd8","lid":"d26240427e"}) })</script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2026 <a href="https://twitter.com/SandorDargo">Sandor Dargo</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/cpp/">cpp</a> <a class="post-tag" href="/tags/books/">books</a> <a class="post-tag" href="/tags/watercooler/">watercooler</a> <a class="post-tag" href="/tags/career/">career</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/cpp23/">cpp23</a> <a class="post-tag" href="/tags/stl/">stl</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/self-improvement/">self improvement</a> <a class="post-tag" href="/tags/management/">management</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://www.sandordargo.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
