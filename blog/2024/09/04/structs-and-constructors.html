<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Structs and constructors" /><meta property="og:locale" content="en_US" /><meta name="description" content="Today, we are going to talk about when and why structs should have constructors if they should have them at all. We are also going to see once again that generic best practices and best practices to reduce binary size do not always go hand in hand. I had some time to dedicate to cleaning up code. I remembered that recently I saw some structs like this: 1 2 3 4 SomeSimpleStuct data; data.a_number = 42; data.a_character = &#39;a&#39;; return data; I didn’t like this code. Even though the struct didn’t have any constructors, even though not all the members were set, with the help of designated initializers it’s so easy to get rid of the initialize then modify anti-pattern Connor Hoekstra talked about a couple of years ago at the Italian C++ conference. 1 return SomeSimpleStuct{.a_number = 42, .a_character = &#39;a&#39;}; As a result, you get code that still tells you what is initialized, code which is more efficient without making it less readable and in addition you don’t have to think about why the object is created before its members are set. Next, I checked some code where I did see some non-default constructors, probably because people wanted to avoid to previous pattern. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 struct PileOfData { PileOfData() = default; explicit PileOfData(const std::string &amp;type, const std::string &amp;identifier = &quot;&quot;) : type(type), identifier(identifier) {} std::string type; std::string identifier; }; // Somewhere else... someVar.data = PileOfData(&quot;foo&quot;, &quot;bar&quot;) // Yet another place PileOfData data(&quot;foobar&quot;); I didn’t like this pattern either, because the members are public and we could initialize them directly. It’s true that it was not enough to simply remove the constructors, we had to modify the syntax. We could either use designated initializers which come along with aggregate initialization with its braces or if we didn’t need the member names in the initializer expressions, we could use simply braces. 1 2 3 4 5 6 7 8 9 struct PileOfData { std::string type; std::string identifier; }; // Somewhere else... someVar.data = PileOfData{.type = &quot;foo&quot;, .identifier = &quot;bar&quot;} // Yet another place PileOfData data{&quot;foobar&quot;}; So this shows that if you still haven’t upgraded to C++20, you can still use aggregate initialization without having to initialize all the members. If we provide n members in the initializer list, the first n member (counting from the top) will be initialized. So unless the constructors are not initializing the first members of the struct (but they skip some in between), they didn’t make much sense from the beginning assuming that the code was not written to a standard earlier than C++11. Then I continued looking for similar code and I found this. 1 2 3 4 5 6 7 8 9 10 11 struct AnotherPileOfData { std::string label; std::string remark; int quantity; AnotherPileOfData(const std::string&amp; label, int quantity); AnotherPileOfData(const Blob&amp; blob); DECLARE_DEFAULT_MEMBERS(AnotherPileOfData) }; Oh, a macro. There is even a corresponding implementation file, with other macro and constructor definitions. 1 2 3 4 5 6 AnotherPileOfData::AnotherPileOfData(const std::string&amp; label, int quantity): label(label), quantity(quantity) {} AnotherPileOfData::AnotherPileOfData(const Blob&amp; blob): label(blob.label), remark(blob.text), quantity(blob.quantity) {} DEFINE_DEFAULT_MEMBERS(AnotherPileOfData) That’s clearly not how most like to see their structs which should be simple. So I immediately started removing the fluff but I didn’t merge the changes. I didn’t even post a code review. Can you guess why? Binary size was significantly impacted. Removing all the user-declared special member functions gave a few extra KBs for widely used classes. The reason is essentially inlining. With defaulted special member functions, each compilation unit where AnotherPileOfData is used, gets a copy of the special member functions’ code. In other words, they are inlined. With the used-provided versions, they are not inlined, but you get simple function calls. I must say that if we didn’t care so much about binary sizes, I’d still go ahead and remove the macro and the constructors from AnotherPileOfData. There would be only one constructor to keep in a certain format and that’s the one taking the blob. I’d probably turn it into a static builder function or a free function as it was suggested by Jonathan Boccara on FluentC++. 1 2 3 AnotherPileOfData makeAnotherPileOfData(const Blob&amp; blob) { return AnotherPileOfData{blob.label, blob.text, blob.quantity}; } Conclusion In my opinion, a struct barely needs a constructor. With the combination of aggregate initialization, designated initializers and the right order of members, you can easily get rid of constructors in a struct. In those rare cases, when you’d still need them you can replace it with a free function keeping your struct as simple as possible. At the same time, it’s worth noting that sometimes a struct has constructors and special member functions to limit binary sizes. By moving special member functions to implementation files, we can limit inlining and thus decrease binary sizes. Connect deeper If you liked this article, please hit on the like button, subscribe to my newsletter and let’s connect on Twitter!" /><meta property="og:description" content="Today, we are going to talk about when and why structs should have constructors if they should have them at all. We are also going to see once again that generic best practices and best practices to reduce binary size do not always go hand in hand. I had some time to dedicate to cleaning up code. I remembered that recently I saw some structs like this: 1 2 3 4 SomeSimpleStuct data; data.a_number = 42; data.a_character = &#39;a&#39;; return data; I didn’t like this code. Even though the struct didn’t have any constructors, even though not all the members were set, with the help of designated initializers it’s so easy to get rid of the initialize then modify anti-pattern Connor Hoekstra talked about a couple of years ago at the Italian C++ conference. 1 return SomeSimpleStuct{.a_number = 42, .a_character = &#39;a&#39;}; As a result, you get code that still tells you what is initialized, code which is more efficient without making it less readable and in addition you don’t have to think about why the object is created before its members are set. Next, I checked some code where I did see some non-default constructors, probably because people wanted to avoid to previous pattern. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 struct PileOfData { PileOfData() = default; explicit PileOfData(const std::string &amp;type, const std::string &amp;identifier = &quot;&quot;) : type(type), identifier(identifier) {} std::string type; std::string identifier; }; // Somewhere else... someVar.data = PileOfData(&quot;foo&quot;, &quot;bar&quot;) // Yet another place PileOfData data(&quot;foobar&quot;); I didn’t like this pattern either, because the members are public and we could initialize them directly. It’s true that it was not enough to simply remove the constructors, we had to modify the syntax. We could either use designated initializers which come along with aggregate initialization with its braces or if we didn’t need the member names in the initializer expressions, we could use simply braces. 1 2 3 4 5 6 7 8 9 struct PileOfData { std::string type; std::string identifier; }; // Somewhere else... someVar.data = PileOfData{.type = &quot;foo&quot;, .identifier = &quot;bar&quot;} // Yet another place PileOfData data{&quot;foobar&quot;}; So this shows that if you still haven’t upgraded to C++20, you can still use aggregate initialization without having to initialize all the members. If we provide n members in the initializer list, the first n member (counting from the top) will be initialized. So unless the constructors are not initializing the first members of the struct (but they skip some in between), they didn’t make much sense from the beginning assuming that the code was not written to a standard earlier than C++11. Then I continued looking for similar code and I found this. 1 2 3 4 5 6 7 8 9 10 11 struct AnotherPileOfData { std::string label; std::string remark; int quantity; AnotherPileOfData(const std::string&amp; label, int quantity); AnotherPileOfData(const Blob&amp; blob); DECLARE_DEFAULT_MEMBERS(AnotherPileOfData) }; Oh, a macro. There is even a corresponding implementation file, with other macro and constructor definitions. 1 2 3 4 5 6 AnotherPileOfData::AnotherPileOfData(const std::string&amp; label, int quantity): label(label), quantity(quantity) {} AnotherPileOfData::AnotherPileOfData(const Blob&amp; blob): label(blob.label), remark(blob.text), quantity(blob.quantity) {} DEFINE_DEFAULT_MEMBERS(AnotherPileOfData) That’s clearly not how most like to see their structs which should be simple. So I immediately started removing the fluff but I didn’t merge the changes. I didn’t even post a code review. Can you guess why? Binary size was significantly impacted. Removing all the user-declared special member functions gave a few extra KBs for widely used classes. The reason is essentially inlining. With defaulted special member functions, each compilation unit where AnotherPileOfData is used, gets a copy of the special member functions’ code. In other words, they are inlined. With the used-provided versions, they are not inlined, but you get simple function calls. I must say that if we didn’t care so much about binary sizes, I’d still go ahead and remove the macro and the constructors from AnotherPileOfData. There would be only one constructor to keep in a certain format and that’s the one taking the blob. I’d probably turn it into a static builder function or a free function as it was suggested by Jonathan Boccara on FluentC++. 1 2 3 AnotherPileOfData makeAnotherPileOfData(const Blob&amp; blob) { return AnotherPileOfData{blob.label, blob.text, blob.quantity}; } Conclusion In my opinion, a struct barely needs a constructor. With the combination of aggregate initialization, designated initializers and the right order of members, you can easily get rid of constructors in a struct. In those rare cases, when you’d still need them you can replace it with a free function keeping your struct as simple as possible. At the same time, it’s worth noting that sometimes a struct has constructors and special member functions to limit binary sizes. By moving special member functions to implementation files, we can limit inlining and thus decrease binary sizes. Connect deeper If you liked this article, please hit on the like button, subscribe to my newsletter and let’s connect on Twitter!" /><link rel="canonical" href="https://www.sandordargo.com/blog/2024/09/04/structs-and-constructors" /><meta property="og:url" content="https://www.sandordargo.com/blog/2024/09/04/structs-and-constructors" /><meta property="og:site_name" content="Sandor Dargo’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-09-04T00:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Structs and constructors" /><meta name="twitter:site" content="@SandorDargo" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-11-29T06:44:54+01:00","datePublished":"2024-09-04T00:00:00+02:00","description":"Today, we are going to talk about when and why structs should have constructors if they should have them at all. We are also going to see once again that generic best practices and best practices to reduce binary size do not always go hand in hand. I had some time to dedicate to cleaning up code. I remembered that recently I saw some structs like this: 1 2 3 4 SomeSimpleStuct data; data.a_number = 42; data.a_character = &#39;a&#39;; return data; I didn’t like this code. Even though the struct didn’t have any constructors, even though not all the members were set, with the help of designated initializers it’s so easy to get rid of the initialize then modify anti-pattern Connor Hoekstra talked about a couple of years ago at the Italian C++ conference. 1 return SomeSimpleStuct{.a_number = 42, .a_character = &#39;a&#39;}; As a result, you get code that still tells you what is initialized, code which is more efficient without making it less readable and in addition you don’t have to think about why the object is created before its members are set. Next, I checked some code where I did see some non-default constructors, probably because people wanted to avoid to previous pattern. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 struct PileOfData { PileOfData() = default; explicit PileOfData(const std::string &amp;type, const std::string &amp;identifier = &quot;&quot;) : type(type), identifier(identifier) {} std::string type; std::string identifier; }; // Somewhere else... someVar.data = PileOfData(&quot;foo&quot;, &quot;bar&quot;) // Yet another place PileOfData data(&quot;foobar&quot;); I didn’t like this pattern either, because the members are public and we could initialize them directly. It’s true that it was not enough to simply remove the constructors, we had to modify the syntax. We could either use designated initializers which come along with aggregate initialization with its braces or if we didn’t need the member names in the initializer expressions, we could use simply braces. 1 2 3 4 5 6 7 8 9 struct PileOfData { std::string type; std::string identifier; }; // Somewhere else... someVar.data = PileOfData{.type = &quot;foo&quot;, .identifier = &quot;bar&quot;} // Yet another place PileOfData data{&quot;foobar&quot;}; So this shows that if you still haven’t upgraded to C++20, you can still use aggregate initialization without having to initialize all the members. If we provide n members in the initializer list, the first n member (counting from the top) will be initialized. So unless the constructors are not initializing the first members of the struct (but they skip some in between), they didn’t make much sense from the beginning assuming that the code was not written to a standard earlier than C++11. Then I continued looking for similar code and I found this. 1 2 3 4 5 6 7 8 9 10 11 struct AnotherPileOfData { std::string label; std::string remark; int quantity; AnotherPileOfData(const std::string&amp; label, int quantity); AnotherPileOfData(const Blob&amp; blob); DECLARE_DEFAULT_MEMBERS(AnotherPileOfData) }; Oh, a macro. There is even a corresponding implementation file, with other macro and constructor definitions. 1 2 3 4 5 6 AnotherPileOfData::AnotherPileOfData(const std::string&amp; label, int quantity): label(label), quantity(quantity) {} AnotherPileOfData::AnotherPileOfData(const Blob&amp; blob): label(blob.label), remark(blob.text), quantity(blob.quantity) {} DEFINE_DEFAULT_MEMBERS(AnotherPileOfData) That’s clearly not how most like to see their structs which should be simple. So I immediately started removing the fluff but I didn’t merge the changes. I didn’t even post a code review. Can you guess why? Binary size was significantly impacted. Removing all the user-declared special member functions gave a few extra KBs for widely used classes. The reason is essentially inlining. With defaulted special member functions, each compilation unit where AnotherPileOfData is used, gets a copy of the special member functions’ code. In other words, they are inlined. With the used-provided versions, they are not inlined, but you get simple function calls. I must say that if we didn’t care so much about binary sizes, I’d still go ahead and remove the macro and the constructors from AnotherPileOfData. There would be only one constructor to keep in a certain format and that’s the one taking the blob. I’d probably turn it into a static builder function or a free function as it was suggested by Jonathan Boccara on FluentC++. 1 2 3 AnotherPileOfData makeAnotherPileOfData(const Blob&amp; blob) { return AnotherPileOfData{blob.label, blob.text, blob.quantity}; } Conclusion In my opinion, a struct barely needs a constructor. With the combination of aggregate initialization, designated initializers and the right order of members, you can easily get rid of constructors in a struct. In those rare cases, when you’d still need them you can replace it with a free function keeping your struct as simple as possible. At the same time, it’s worth noting that sometimes a struct has constructors and special member functions to limit binary sizes. By moving special member functions to implementation files, we can limit inlining and thus decrease binary sizes. Connect deeper If you liked this article, please hit on the like button, subscribe to my newsletter and let’s connect on Twitter!","headline":"Structs and constructors","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.sandordargo.com/blog/2024/09/04/structs-and-constructors"},"url":"https://www.sandordargo.com/blog/2024/09/04/structs-and-constructors"}</script><title>Structs and constructors | Sandor Dargo's Blog</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-89625019-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-89625019-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/SANDOR_DARGO_ROUND.JPG" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Sandor Dargo's Blog</a></div><div class="site-subtitle font-italic">On C++, software development and books</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/books/" class="nav-link"> <i class="fa-fw fas fa-book ml-xl-3 mr-xl-3 unloaded"></i> <span>BOOKS</span> </a><li class="nav-item"> <a href="/speaking/" class="nav-link"> <i class="fa-fw fas fa-microphone ml-xl-3 mr-xl-3 unloaded"></i> <span>SPEAKING</span> </a><li class="nav-item"> <a href="/dailycpp/" class="nav-link"> <i class="fa-fw fas fa-link ml-xl-3 mr-xl-3 unloaded"></i> <span>DAILY C++</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>HI...</span> </a></ul><ul class="w-100"><li class="nav-item"> <a href="https://www.patreon.com/sandordargo" class="nav-link"> <img src="https://c5.patreon.com/external/logo/become_a_patron_button.png"></a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/sandordargo" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/SandorDargo" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['sandor.dargo','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/blog"> Blog </a> </span> <span> <a href="/2024"> 2024 </a> </span> <span> <a href="/09"> 09 </a> </span> <span> <a href="/04"> 04 </a> </span> <span>Structs and constructors</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Structs and constructors</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Sandor Dargo </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Sep 4, 2024, 12:00 AM +0200" prep="on" > Sep 4, 2024 <i class="unloaded">2024-09-04T00:00:00+02:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Fri, Nov 29, 2024, 6:44 AM +0100" prefix="Updated " > Nov 29, 2024 <i class="unloaded">2024-11-29T06:44:54+01:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="823 words">4 min</span></div></div><div class="post-content"><p>Today, we are going to talk about when and why structs should have constructors if they should have them at all. We are also going to see once again that generic best practices and best practices to reduce binary size do not always go hand in hand.</p><p>I had some time to dedicate to cleaning up code. I remembered that recently I saw some structs like this:</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">SomeSimpleStuct</span> <span class="n">data</span><span class="p">;</span>
<span class="n">data</span><span class="p">.</span><span class="n">a_number</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="n">data</span><span class="p">.</span><span class="n">a_character</span> <span class="o">=</span> <span class="sc">'a'</span><span class="p">;</span>
<span class="k">return</span> <span class="n">data</span><span class="p">;</span>
</pre></table></code></div></div><p>I didn’t like this code. Even though the struct didn’t have any constructors, even though not all the members were set, with the help of <a href="https://en.cppreference.com/w/cpp/language/aggregate_initialization#Designated_initializers">designated initializers</a> it’s so easy to get rid of the initialize then modify anti-pattern <a href="https://www.youtube.com/live/CjHgL5EQdcY?si=0QEQc_uRH9gsb9io">Connor Hoekstra talked about a couple of years ago at the Italian C++ conference</a>.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">return</span> <span class="n">SomeSimpleStuct</span><span class="p">{.</span><span class="n">a_number</span> <span class="o">=</span> <span class="mi">42</span><span class="p">,</span> <span class="p">.</span><span class="n">a_character</span> <span class="o">=</span> <span class="sc">'a'</span><span class="p">};</span>
</pre></table></code></div></div><p>As a result, you get code that still tells you what is initialized, code which is more efficient without making it less readable and in addition you don’t have to think about why the object is created before its members are set.</p><p>Next, I checked some code where I did see some non-default constructors, probably because people wanted to avoid to previous pattern.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">struct</span> <span class="nc">PileOfData</span> <span class="p">{</span>
  <span class="n">PileOfData</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
  <span class="k">explicit</span> <span class="n">PileOfData</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">type</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">identifier</span> <span class="o">=</span> <span class="s">""</span><span class="p">)</span>
      <span class="o">:</span> <span class="n">type</span><span class="p">(</span><span class="n">type</span><span class="p">),</span> <span class="n">identifier</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span> <span class="p">{}</span>


  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">type</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">identifier</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Somewhere else...</span>
<span class="n">someVar</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">PileOfData</span><span class="p">(</span><span class="s">"foo"</span><span class="p">,</span> <span class="s">"bar"</span><span class="p">)</span>
<span class="c1">// Yet another place</span>
<span class="n">PileOfData</span> <span class="nf">data</span><span class="p">(</span><span class="s">"foobar"</span><span class="p">);</span>
</pre></table></code></div></div><p>I didn’t like this pattern either, because the members are public and we could initialize them directly. It’s true that it was not enough to simply remove the constructors, we had to modify the syntax. We could either use designated initializers which come along with <a href="https://www.sandordargo.com/blog/2024/04/17/initializations-part-2#aggregate-initialization">aggregate initialization</a> with its braces or if we didn’t need the member names in the initializer expressions, we could use simply braces.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">struct</span> <span class="nc">PileOfData</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">type</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">identifier</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Somewhere else...</span>
<span class="n">someVar</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">PileOfData</span><span class="p">{.</span><span class="n">type</span> <span class="o">=</span> <span class="s">"foo"</span><span class="p">,</span> <span class="p">.</span><span class="n">identifier</span> <span class="o">=</span> <span class="s">"bar"</span><span class="p">}</span>
<span class="c1">// Yet another place</span>
<span class="n">PileOfData</span> <span class="n">data</span><span class="p">{</span><span class="s">"foobar"</span><span class="p">};</span>
</pre></table></code></div></div><p>So this shows that if you still haven’t upgraded to C++20, you can still use aggregate initialization without having to initialize all the members. If we provide <code class="language-plaintext highlighter-rouge">n</code> members in the initializer list, the first <code class="language-plaintext highlighter-rouge">n</code> member (counting from the top) will be initialized.</p><p>So unless the constructors are not initializing the first members of the struct (but they skip some in between), they didn’t make much sense from the beginning assuming that the code was not written to a standard earlier than C++11.</p><p>Then I continued looking for similar code and I found this.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">struct</span> <span class="nc">AnotherPileOfData</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">label</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">remark</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">quantity</span><span class="p">;</span>

  <span class="n">AnotherPileOfData</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">label</span><span class="p">,</span> <span class="kt">int</span> <span class="n">quantity</span><span class="p">);</span>
  <span class="n">AnotherPileOfData</span><span class="p">(</span><span class="k">const</span> <span class="n">Blob</span><span class="o">&amp;</span> <span class="n">blob</span><span class="p">);</span>

  <span class="n">DECLARE_DEFAULT_MEMBERS</span><span class="p">(</span><span class="n">AnotherPileOfData</span><span class="p">)</span>
<span class="p">};</span>

</pre></table></code></div></div><p>Oh, a macro. There is even a corresponding implementation file, with other macro and constructor definitions.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">AnotherPileOfData</span><span class="o">::</span><span class="n">AnotherPileOfData</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">label</span><span class="p">,</span> <span class="kt">int</span> <span class="n">quantity</span><span class="p">)</span><span class="o">:</span>
 <span class="n">label</span><span class="p">(</span><span class="n">label</span><span class="p">),</span> <span class="n">quantity</span><span class="p">(</span><span class="n">quantity</span><span class="p">)</span> <span class="p">{}</span>

<span class="n">AnotherPileOfData</span><span class="o">::</span><span class="n">AnotherPileOfData</span><span class="p">(</span><span class="k">const</span> <span class="n">Blob</span><span class="o">&amp;</span> <span class="n">blob</span><span class="p">)</span><span class="o">:</span> <span class="n">label</span><span class="p">(</span><span class="n">blob</span><span class="p">.</span><span class="n">label</span><span class="p">),</span> <span class="n">remark</span><span class="p">(</span><span class="n">blob</span><span class="p">.</span><span class="n">text</span><span class="p">),</span> <span class="n">quantity</span><span class="p">(</span><span class="n">blob</span><span class="p">.</span><span class="n">quantity</span><span class="p">)</span> <span class="p">{}</span>

<span class="n">DEFINE_DEFAULT_MEMBERS</span><span class="p">(</span><span class="n">AnotherPileOfData</span><span class="p">)</span>
</pre></table></code></div></div><p>That’s clearly not how most like to see their structs which should be simple. So I immediately started removing the fluff but I didn’t merge the changes. I didn’t even post a code review. Can you guess why?</p><p>Binary size was significantly impacted. Removing all the user-declared special member functions gave a few extra KBs for widely used classes. The reason is essentially inlining. With defaulted special member functions, each compilation unit where <code class="language-plaintext highlighter-rouge">AnotherPileOfData</code> is used, gets a copy of the special member functions’ code. In other words, they are inlined. With the used-provided versions, they are not inlined, but you get simple function calls.</p><p>I must say that if we didn’t care so much about binary sizes, I’d still go ahead and remove the macro and the constructors from <code class="language-plaintext highlighter-rouge">AnotherPileOfData</code>. There would be only one constructor to keep in a certain format and that’s the one taking the blob. I’d probably turn it into a static builder function or a free function <a href="https://www.fluentcpp.com/2018/06/15/should-structs-have-constructors-in-cpp/">as it was suggested by Jonathan Boccara on FluentC++</a>.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">AnotherPileOfData</span> <span class="nf">makeAnotherPileOfData</span><span class="p">(</span><span class="k">const</span> <span class="n">Blob</span><span class="o">&amp;</span> <span class="n">blob</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">AnotherPileOfData</span><span class="p">{</span><span class="n">blob</span><span class="p">.</span><span class="n">label</span><span class="p">,</span> <span class="n">blob</span><span class="p">.</span><span class="n">text</span><span class="p">,</span> <span class="n">blob</span><span class="p">.</span><span class="n">quantity</span><span class="p">};</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="conclusion">Conclusion</h2><p>In my opinion, a <code class="language-plaintext highlighter-rouge">struct</code> barely needs a constructor. With the combination of aggregate initialization, designated initializers and the right order of members, you can easily get rid of constructors in a <code class="language-plaintext highlighter-rouge">struct</code>. In those rare cases, when you’d still need them you can replace it with a free function keeping your <code class="language-plaintext highlighter-rouge">struct</code> as simple as possible.</p><p>At the same time, it’s worth noting that sometimes a <code class="language-plaintext highlighter-rouge">struct</code> has constructors and special member functions to limit binary sizes. <a href="https://www.sandordargo.com/blog/2023/02/01/special-functions-and-binary-sizes">By moving special member functions to implementation files, we can limit inlining and thus decrease binary sizes.</a></p><h2 id="connect-deeper">Connect deeper</h2><p>If you liked this article, please</p><ul><li>hit on the like button,<li><a href="http://eepurl.com/gvcv1j">subscribe to my newsletter</a><li>and let’s connect on <a href="https://twitter.com/SandorDargo">Twitter</a>!</ul><a href="https://www.patreon.com/sandordargo" style="float: left; padding-left: 0;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://c5.patreon.com/external/logo/become_a_patron_button.png" style="float: left; padding-left: 0;"></a></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/dev/'>dev</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cpp/" class="post-tag no-text-decoration" >cpp</a> <a href="/tags/structs/" class="post-tag no-text-decoration" >structs</a> <a href="/tags/binarysizes/" class="post-tag no-text-decoration" >binarysizes</a> <a href="/tags/constructors/" class="post-tag no-text-decoration" >constructors</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><a href="https://www.patreon.com/sandordargo" style="float: left; padding-left: 0;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://c5.patreon.com/external/logo/become_a_patron_button.png" style="float: left; padding-left: 0;"></a><div class="share-wrapper"> <a href="https://www.patreon.com/sandordargo" style="float: left; padding-left: 0;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://c5.patreon.com/external/logo/become_a_patron_button.png" style="float: left; padding-left: 0;"></a> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Structs and constructors - Sandor Dargo's Blog&url=https://www.sandordargo.com/blog/2024/09/04/structs-and-constructors" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Structs and constructors - Sandor Dargo's Blog&u=https://www.sandordargo.com/blog/2024/09/04/structs-and-constructors" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Structs and constructors - Sandor Dargo's Blog&url=https://www.sandordargo.com/blog/2024/09/04/structs-and-constructors" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://news.ycombinator.com/submitlink?t=Structs and constructors - Sandor Dargo's Blog&u=https://www.sandordargo.com/blog/2024/09/04/structs-and-constructors" data-toggle="tooltip" data-placement="top" title="HackerNews" target="_blank" rel="noopener" aria-label="HackerNews"> <i class="fa-fw fab fa-hacker-news"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/blog/2026/01/21/clocks-part-8-cpp20-timezones">Time in C++: C++20 Brought Us Time Zones</a><li><a href="/blog/2019/04/10/lesson-of-a-booking-dont-trust-the-system">Lesson of a booking: Don't trust the system!</a><li><a href="/blog/2020/07/22/always-catch-exceptions-by-reference">Why should we always catch exceptions by reference?</a><li><a href="/blog/2020/11/28/emergent-design">Emergent Design: The Evolutionary Nature of Professional Software Development by Scott Bain</a><li><a href="/blog/2021/10/06/airy-code-reviews">Bring some fresh AIR and write effective code review comments</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cpp/">cpp</a> <a class="post-tag" href="/tags/books/">books</a> <a class="post-tag" href="/tags/watercooler/">watercooler</a> <a class="post-tag" href="/tags/career/">career</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/cpp23/">cpp23</a> <a class="post-tag" href="/tags/stl/">stl</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/self-improvement/">self-improvement</a> <a class="post-tag" href="/tags/management/">management</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/blog/2024/06/26/member-ordering-and-binary-size"><div class="card-body"> <span class="timeago small" > Jun 26, 2024 <i class="unloaded">2024-06-26T00:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Member ordering and binary sizes</h3><div class="text-muted small"><p> While I have been preparing my presentation for C++ On Sea, I realized that something is missing from How to keep your binaries small. The importance of member ordering! I remember learning at a p...</p></div></div></a></div><div class="card"> <a href="/blog/2024/07/31/rule-of-5-once-again"><div class="card-body"> <span class="timeago small" > Jul 31, 2024 <i class="unloaded">2024-07-31T00:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Once more about the rule of 5</h3><div class="text-muted small"><p> Arne Mertz talked about misused guidelines at C++OnSea. Among those, there was the rule of 5. Which made me think about a pattern I’ve seen. Let’s first repeat what the rule of 5 says. The Rule...</p></div></div></a></div><div class="card"> <a href="/blog/2024/08/07/rule-of-five-and-base-classes"><div class="card-body"> <span class="timeago small" > Aug 7, 2024 <i class="unloaded">2024-08-07T00:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>The rule of 5 and inheritance</h3><div class="text-muted small"><p> Last week, we talked about the rule of five and we discovered what it means for move operations if we only declare a destructor and not the rest of the special member functions. In that case, move ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/blog/2024/08/28/wrapping-up-as-airbnb-host" class="btn btn-outline-primary" prompt="Older"><p>Wrapping up our Airbnb host experience</p></a> <a href="/blog/2024/09/11/the-limits-of-a-portfolio-job" class="btn btn-outline-primary" prompt="Newer"><p>The limits of a portfolio job</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//sandordargo-github-io.disqus.com/embed.js', disqusConfig: function() { this.page.title = 'Structs and constructors'; this.page.url = 'https://www.sandordargo.com/blog/2024/09/04/structs-and-constructors'; this.page.identifier = '/blog/2024/09/04/structs-and-constructors'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><div id="amzn-assoc-ad-be5a767b-3346-40aa-bc00-2eff0ce33d2b"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=be5a767b-3346-40aa-bc00-2eff0ce33d2b"></script> <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script> <script type="text/javascript" src="//downloads.mailchimp.com/js/signup-forms/popup/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script><script type="text/javascript">require(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us16.list-manage.com","uuid":"b073dbd5c29322302f59a8cd8","lid":"d26240427e"}) })</script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2026 <a href="https://twitter.com/SandorDargo">Sandor Dargo</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/cpp/">cpp</a> <a class="post-tag" href="/tags/books/">books</a> <a class="post-tag" href="/tags/watercooler/">watercooler</a> <a class="post-tag" href="/tags/career/">career</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/cpp23/">cpp23</a> <a class="post-tag" href="/tags/stl/">stl</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/self-improvement/">self improvement</a> <a class="post-tag" href="/tags/management/">management</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://www.sandordargo.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
